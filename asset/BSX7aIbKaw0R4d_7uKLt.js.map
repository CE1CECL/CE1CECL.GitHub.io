{"version":3,"file":"BSX7aIbKaw0R4d_7uKLt.js","sources":["../../src/components/Avatar.tsx"],"sourcesContent":["import { PresenceUpdateStatus } from \"@spacebarchat/spacebar-api-types/v9\";\nimport { observer } from \"mobx-react-lite\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport AccountStore from \"../stores/AccountStore\";\nimport { useAppStore } from \"../stores/AppStore\";\nimport Presence from \"../stores/objects/Presence\";\nimport User from \"../stores/objects/User\";\nimport Container from \"./Container\";\nimport Floating from \"./floating/Floating\";\nimport FloatingTrigger from \"./floating/FloatingTrigger\";\n\nconst Wrapper = styled(Container)<{ size: number; hasClick?: boolean }>`\n\twidth: ${(props) => props.size}px;\n\theight: ${(props) => props.size}px;\n\tposition: relative;\n\tbackground-color: transparent;\n\n\t&:hover {\n\t\ttext-decoration: underline;\n\t\tcursor: ${(props) => (props.hasClick ? \"pointer\" : \"default\")};\n\t}\n`;\n\nconst StatusDot = styled.span<{ color: string; width?: number; height?: number }>`\n\tposition: absolute;\n\tbottom: 0;\n\tright: 0;\n\tbackground-color: ${(props) => props.color};\n\tborder-radius: 50%;\n\tborder: 2px solid var(--background-primary);\n\twidth: ${(props) => props.width ?? 10}px;\n\theight: ${(props) => props.height ?? 10}px;\n`;\n\nfunction Yes(onClick: React.MouseEventHandler<HTMLDivElement>) {\n\treturn ({ children }: { children: React.ReactNode }) => {\n\t\treturn <div onClick={onClick}>{children}</div>;\n\t};\n}\n\ninterface Props {\n\tuser?: User | AccountStore;\n\tsize?: number;\n\tstyle?: React.CSSProperties;\n\tonClick?: React.MouseEventHandler<HTMLDivElement> | null;\n\tpopoutPlacement?: \"left\" | \"right\" | \"top\" | \"bottom\";\n\tpresence?: Presence;\n\tstatusDotStyle?: {\n\t\twidth?: number;\n\t\theight?: number;\n\t};\n\tshowPresence?: boolean;\n}\n\nfunction Avatar(props: Props) {\n\tconst app = useAppStore();\n\n\tconst ref = React.useRef<HTMLDivElement>(null);\n\n\tconst user = props.user ?? app.account;\n\tif (!user) return null;\n\n\t// if onClick is null, use a div. if we pass a function, use yes. otherwise use FloatingTrigger\n\tconst Base = props.onClick === null ? \"div\" : props.onClick ? Yes(props.onClick) : FloatingTrigger;\n\n\treturn (\n\t\t<Floating\n\t\t\tplacement=\"right-start\"\n\t\t\ttype=\"userPopout\"\n\t\t\tprops={{\n\t\t\t\tuser: user as unknown as User,\n\t\t\t}}\n\t\t>\n\t\t\t<Base>\n\t\t\t\t<Wrapper size={props.size ?? 32} style={props.style} ref={ref} hasClick={props.onClick !== null}>\n\t\t\t\t\t<img\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tborderRadius: \"50%\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tsrc={user.avatarUrl}\n\t\t\t\t\t\twidth={props.size ?? 32}\n\t\t\t\t\t\theight={props.size ?? 32}\n\t\t\t\t\t\tloading=\"eager\"\n\t\t\t\t\t/>\n\t\t\t\t\t{props.showPresence && (\n\t\t\t\t\t\t<StatusDot\n\t\t\t\t\t\t\tcolor={app.theme.getStatusColor(props.presence?.status ?? PresenceUpdateStatus.Offline)}\n\t\t\t\t\t\t\t{...props.statusDotStyle}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Wrapper>\n\t\t\t</Base>\n\t\t</Floating>\n\t);\n}\n\nexport default observer(Avatar);\n"],"names":["Wrapper","styled","Container","props","StatusDot","Yes","onClick","children","jsx","Avatar","app","useAppStore","ref","React","user","Base","FloatingTrigger","Floating","jsxs","_a","PresenceUpdateStatus","Avatar$1","observer"],"mappings":"kQAYA,MAAMA,EAAUC,EAAOC,CAAS;AAAA,UACrBC,GAAUA,EAAM,IAAI;AAAA,WACnBA,GAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAMnBA,GAAWA,EAAM,SAAW,UAAY,SAAU;AAAA;AAAA,EAIzDC,EAAYH,EAAO;AAAA;AAAA;AAAA;AAAA,qBAIHE,GAAUA,EAAM,KAAK;AAAA;AAAA;AAAA,UAGhCA,GAAUA,EAAM,OAAS,EAAE;AAAA,WAC1BA,GAAUA,EAAM,QAAU,EAAE;AAAA,EAGxC,SAASE,EAAIC,EAAkD,CACvD,MAAA,CAAC,CAAE,SAAAC,KACFC,EAAA,IAAC,MAAI,CAAA,QAAAF,EAAmB,SAAAC,CAAS,CAAA,CAE1C,CAgBA,SAASE,EAAON,EAAc,OAC7B,MAAMO,EAAMC,IAENC,EAAMC,EAAM,OAAuB,IAAI,EAEvCC,EAAOX,EAAM,MAAQO,EAAI,QAC/B,GAAI,CAACI,EAAa,OAAA,KAGZ,MAAAC,EAAOZ,EAAM,UAAY,KAAO,MAAQA,EAAM,QAAUE,EAAIF,EAAM,OAAO,EAAIa,EAGlF,OAAAR,EAAA,IAACS,EAAA,CACA,UAAU,cACV,KAAK,aACL,MAAO,CACN,KAAAH,CACD,EAEA,SAACN,EAAAA,IAAAO,EAAA,CACA,SAACG,EAAAA,KAAAlB,EAAA,CAAQ,KAAMG,EAAM,MAAQ,GAAI,MAAOA,EAAM,MAAO,IAAAS,EAAU,SAAUT,EAAM,UAAY,KAC1F,SAAA,CAAAK,EAAA,IAAC,MAAA,CACA,MAAO,CACN,aAAc,KACf,EACA,IAAKM,EAAK,UACV,MAAOX,EAAM,MAAQ,GACrB,OAAQA,EAAM,MAAQ,GACtB,QAAQ,OAAA,CACT,EACCA,EAAM,cACNK,EAAA,IAACJ,EAAA,CACA,MAAOM,EAAI,MAAM,iBAAeS,EAAAhB,EAAM,WAAN,YAAAgB,EAAgB,SAAUC,EAAqB,OAAO,EACrF,GAAGjB,EAAM,cAAA,CACX,CAAA,CAAA,CAEF,CACD,CAAA,CAAA,CAAA,CAGH,CAEA,MAAekB,EAAAC,EAASb,CAAM"}