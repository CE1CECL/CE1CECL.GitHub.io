import{u as h,R as x,a3 as j,a4 as f,j as e}from"./D1zPwdc9cyvUD_PRY_dc.js";import{S as b}from"./nS5X1rqYDTx-qoLepjc2.js";import{W as k,A as y,H as F,i as S,S as L,F as I,d as T,L as A,a as C,b as E,c as B,I as v,e as w,j as H}from"./DHl6qXLxfX-P_8rTMqVp.js";import{T as R}from"./BqRj4Kh8YikLdguz1juN.js";import{u as W}from"./DMCex30FeWvvThtDj-pY.js";import{u as M}from"./DEKrkfWNVpi_Q5QzvrSJ.js";import{m as q}from"./BDzl6LkRQpjGU2VD4La_.js";function K(o){const n=M(),u=W("MFA"),d=h(),[i,c]=x.useState(!1),{register:l,handleSubmit:m,formState:{errors:t},setError:a}=j(),p=m(g=>{c(!0),n.rest.post(f.mfaTotp(),{...g,ticket:o.ticket}).then(r=>{n.setToken(r.token,!0),d("/app",{replace:!0})}).catch(r=>{if("message"in r)if(r.errors){const s=q(r.errors);s?a(s.field,{type:"manual",message:s.error}):a("code",{type:"manual",message:r.message})}else a("code",{type:"manual",message:r.message});else u.error(r),a("code",{type:"manual",message:"Unknown Error"})}).finally(()=>c(!1))});return e.jsx(k,{children:e.jsx(y,{children:e.jsxs(F,{children:[e.jsx(b,{height:48,width:"auto"}),e.jsx(S,{children:"Two-factor authentication"}),e.jsx(L,{children:"You can use a backup code or your two-factor authentication mobile app."}),e.jsxs(I,{onSubmit:p,children:[e.jsxs(T,{marginBottom:!0,style:{marginTop:0},children:[e.jsxs(A,{error:!!t.code,children:[e.jsx(C,{children:"Enter 2FA/Backup Code"}),t.code&&e.jsx(E,{children:e.jsxs(e.Fragment,{children:[e.jsx(R,{children:"-"}),t.code.message]})})]}),e.jsx(B,{children:e.jsx(v,{type:"text",autoFocus:!0,...l("code",{required:!0}),error:!!t.code,disabled:i,placeholder:"6-digit authentication code/8-digit backup code"})})]}),e.jsx(w,{palette:"primary",type:"submit",disabled:i,children:"Log In"}),e.jsx(H,{onClick:()=>o.close(),type:"button",children:"Go Back to Login"})]})]})})})}export{K as M};
//# sourceMappingURL=C-agU0VqeIO-b0DLLA6K.js.map
