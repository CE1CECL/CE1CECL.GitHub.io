{"version":3,"file":"CXXxLqRd3r4Ubxbtlfqb.js","sources":["../../src/components/messaging/MessageAuthor.tsx"],"sourcesContent":["import { observer } from \"mobx-react-lite\";\nimport React, { useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { ContextMenuContext } from \"../../contexts/ContextMenuContext\";\nimport { useAppStore } from \"../../stores/AppStore\";\nimport GuildMember from \"../../stores/objects/GuildMember\";\nimport { MessageLike } from \"../../stores/objects/Message\";\nimport Floating from \"../floating/Floating\";\nimport FloatingTrigger from \"../floating/FloatingTrigger\";\n\nconst Container = styled.div`\n\tfont-size: 16px;\n\tfont-weight: var(--font-weight-medium);\n\tuser-select: none;\n\n\t&:hover {\n\t\ttext-decoration: underline;\n\t\tcursor: pointer;\n\t}\n`;\n\ninterface Props {\n\tmessage: MessageLike;\n}\n\nfunction MessageAuthor({ message }: Props) {\n\tconst app = useAppStore();\n\tconst contextMenu = useContext(ContextMenuContext);\n\tconst [color, setColor] = React.useState<string | undefined>(undefined);\n\tconst [eventData, setEventData] = React.useState<React.MouseEvent<HTMLDivElement, MouseEvent> | undefined>();\n\tconst [member, setMember] = React.useState<GuildMember | undefined>(undefined);\n\n\tReact.useEffect(() => {\n\t\tif (!eventData) return;\n\t\tcontextMenu.onContextMenu(eventData, { type: \"user\", user: message.author, member });\n\t}, [eventData, member]);\n\n\tconst onContextMenu = async (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tsetEventData(e);\n\t\tapp.guilds.get(message.guild_id!)?.members.resolve(message.author.id).then(setMember);\n\t};\n\n\tReact.useEffect(() => {\n\t\tif (\"guild_id\" in message && message.guild_id) {\n\t\t\tconst guild = app.guilds.get(message.guild_id!);\n\t\t\tif (!guild) return;\n\t\t\tconst member = guild.members.get(message.author.id);\n\t\t\tif (!member) return;\n\t\t\tsetColor(member.roleColor);\n\t\t}\n\t}, [message]);\n\n\treturn (\n\t\t<Floating\n\t\t\tplacement=\"right-start\"\n\t\t\ttype=\"userPopout\"\n\t\t\tprops={{\n\t\t\t\tuser: message.author,\n\t\t\t}}\n\t\t>\n\t\t\t<FloatingTrigger>\n\t\t\t\t<Container\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tcolor,\n\t\t\t\t\t}}\n\t\t\t\t\tref={contextMenu.setReferenceElement}\n\t\t\t\t\tonContextMenu={onContextMenu}\n\t\t\t\t>\n\t\t\t\t\t{message.author.username}\n\t\t\t\t</Container>\n\t\t\t</FloatingTrigger>\n\t\t</Floating>\n\t);\n}\n\nexport default observer(MessageAuthor);\n"],"names":["Container","styled","MessageAuthor","message","app","useAppStore","contextMenu","useContext","ContextMenuContext","color","setColor","React","eventData","setEventData","member","setMember","onContextMenu","_a","guild","jsx","Floating","FloatingTrigger","MessageAuthor$1","observer"],"mappings":"kQAUA,MAAMA,EAAYC,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAezB,SAASC,EAAc,CAAE,QAAAC,GAAkB,CAC1C,MAAMC,EAAMC,IACNC,EAAcC,aAAWC,CAAkB,EAC3C,CAACC,EAAOC,CAAQ,EAAIC,EAAM,SAA6B,MAAS,EAChE,CAACC,EAAWC,CAAY,EAAIF,EAAM,SAAmE,EACrG,CAACG,EAAQC,CAAS,EAAIJ,EAAM,SAAkC,MAAS,EAE7EA,EAAM,UAAU,IAAM,CAChBC,GACON,EAAA,cAAcM,EAAW,CAAE,KAAM,OAAQ,KAAMT,EAAQ,OAAQ,OAAAW,CAAA,CAAQ,CAAA,EACjF,CAACF,EAAWE,CAAM,CAAC,EAEhB,MAAAE,EAAgB,MAAO,GAAoD,OAChF,EAAE,eAAe,EACjB,EAAE,gBAAgB,EAElBH,EAAa,CAAC,GACdI,EAAAb,EAAI,OAAO,IAAID,EAAQ,QAAS,IAAhC,MAAAc,EAAmC,QAAQ,QAAQd,EAAQ,OAAO,IAAI,KAAKY,EAAS,EAGrF,OAAAJ,EAAM,UAAU,IAAM,CACjB,GAAA,aAAcR,GAAWA,EAAQ,SAAU,CAC9C,MAAMe,EAAQd,EAAI,OAAO,IAAID,EAAQ,QAAS,EAC9C,GAAI,CAACe,EAAO,OACZ,MAAMJ,EAASI,EAAM,QAAQ,IAAIf,EAAQ,OAAO,EAAE,EAClD,GAAI,CAACW,EAAQ,OACbJ,EAASI,EAAO,SAAS,CAC1B,CAAA,EACE,CAACX,CAAO,CAAC,EAGXgB,EAAA,IAACC,EAAA,CACA,UAAU,cACV,KAAK,aACL,MAAO,CACN,KAAMjB,EAAQ,MACf,EAEA,eAACkB,EACA,CAAA,SAAAF,EAAA,IAACnB,EAAA,CACA,MAAO,CACN,MAAAS,CACD,EACA,IAAKH,EAAY,oBACjB,cAAAU,EAEC,WAAQ,OAAO,QAAA,CAAA,EAElB,CAAA,CAAA,CAGH,CAEA,MAAeM,EAAAC,EAASrB,CAAa"}