var m=Object.defineProperty;var u=(n,e,p)=>e in n?m(n,e,{enumerable:!0,configurable:!0,writable:!0,value:p}):n[e]=p;var s=(n,e,p)=>(u(n,typeof e!="symbol"?e+"":e,p),p);import{ax as y,ay as l,ac as r,ad as i,ae as g}from"./D1zPwdc9cyvUD_PRY_dc.js";import{m as c}from"./DrT-OjQzfEY7lROglKcx.js";import"./DLYpfbp2ZP7_jS18hc2-.js";import{L as f}from"./85yZmE5PqfcNKC64qTgv.js";import{R as S}from"./QYpFnEzuinoxVZvJrekf.js";import{i as b}from"./p91ReBh2MzHDYaH0T7ID.js";import{A as v}from"./DeE1E7vdvsiIatkqvKJg.js";import{C as L}from"./BsaNsm0ZeBT5O1wakmFj.js";import{E as k}from"./BBXXyFoZHNX66wsPsV4T.js";import{G as C}from"./CfTYe73xj6dTQEiFuber.js";import{G}from"./D_v2DDyvPPXeLH9Hi12m.js";import{M as A}from"./CXBVdwoAV_OPSc57nyRN.js";import{P as T}from"./DlsU_2FDtZSTwjVnD2iq.js";import{P as I}from"./B6bJ7aPQ1hwLqHjw_T1b.js";import{R as E}from"./C8pzE1gk8QnypBhi2HGn.js";import{T as R}from"./BTo-eujPARglRyyu9XZx.js";import{U as F}from"./B56h0OIPfCJFWKon7YQs.js";import{U}from"./DEPBd17va3CzTk3XrncT.js";var N=Object.defineProperty,P=Object.getOwnPropertyDescriptor,o=(n,e,p,d)=>{for(var a=d>1?void 0:d?P(e,p):e,h=n.length-1,w;h>=0;h--)(w=n[h])&&(a=(d?w(e,p,a):w(a))||a);return d&&a&&N(e,p,a),a};class t{constructor(){s(this,"logger",new f("AppStore"));s(this,"isGatewayReady",!1);s(this,"isAppLoading",!0);s(this,"isNetworkConnected",!0);s(this,"tokenLoaded",!1);s(this,"token",null);s(this,"fpsShown",!1);s(this,"theme",new R);s(this,"account",null);s(this,"gateway",new C(this));s(this,"guilds",new G(this));s(this,"roles",new E(this));s(this,"channels",new L(this));s(this,"users",new U(this));s(this,"privateChannels",new I(this));s(this,"rest",new S(this));s(this,"experiments",new k);s(this,"presences",new T(this));s(this,"queue",new A(this));s(this,"updaterStore",null);s(this,"activeGuild",null);s(this,"activeGuildId","@me");s(this,"activeChannel",null);s(this,"activeChannelId");s(this,"memberListVisible",!0);y(this),b&&(this.updaterStore=new F(this)),this.toggleMemberList=this.toggleMemberList.bind(this),this.windowToggleFps=this.windowToggleFps.bind(this),window.windowToggleFps=this.windowToggleFps,window.addEventListener("online",()=>this.setNetworkConnected(!0)),window.addEventListener("offline",()=>this.setNetworkConnected(!1))}setGatewayReady(e){this.isGatewayReady=e}setAppLoading(e){this.isAppLoading=e}setUser(e){this.account=new v(e)}setNetworkConnected(e){this.isNetworkConnected=e}get isReady(){return!this.isAppLoading&&this.isGatewayReady&&this.isNetworkConnected}setActiveGuildId(e){this.activeGuildId=e,this.activeGuild=(e?this.guilds.get(e):null)??null}setActiveChannelId(e){this.activeChannelId=e,this.activeChannel=(e?this.channels.get(e):null)??null}toggleMemberList(){this.memberListVisible=!this.memberListVisible}windowToggleFps(){this.setFpsShown(!this.fpsShown)}setToken(e,p=!1){this.token=e,this.tokenLoaded=!0,p&&(l.setItem("token",e),this.logger.info("Token saved to storage"))}loadToken(){const e=l.getItem("token");this.tokenLoaded=!0,e?(this.logger.debug("Loaded token from storage."),this.setToken(e)):(this.logger.debug("No token found in storage."),this.setGatewayReady(!0))}logout(){this.token=null,this.tokenLoaded=!1,this.isAppLoading=!1,this.isGatewayReady=!0,l.clear(),c.closeAll()}setFpsShown(e){this.fpsShown=e,l.setItem("fpsShown",e)}loadFpsShown(){this.fpsShown=l.getItem("fpsShown")??!1}setUpdaterEnabled(e){var p;(p=this.updaterStore)==null||p.setEnabled(e),l.setItem("updaterEnabled",e)}loadUpdaterEnabled(){var e;(e=this.updaterStore)==null||e.setEnabled(l.getItem("updaterEnabled")??!0)}loadSettings(){this.loadFpsShown(),this.loadToken(),this.loadUpdaterEnabled()}}o([r],t.prototype,"isGatewayReady",2);o([r],t.prototype,"isAppLoading",2);o([r],t.prototype,"isNetworkConnected",2);o([r],t.prototype,"tokenLoaded",2);o([r],t.prototype,"token",2);o([r],t.prototype,"fpsShown",2);o([r],t.prototype,"theme",2);o([r],t.prototype,"account",2);o([r],t.prototype,"gateway",2);o([r],t.prototype,"guilds",2);o([r],t.prototype,"roles",2);o([r],t.prototype,"channels",2);o([r],t.prototype,"users",2);o([r],t.prototype,"privateChannels",2);o([r],t.prototype,"rest",2);o([r],t.prototype,"experiments",2);o([r],t.prototype,"presences",2);o([r],t.prototype,"queue",2);o([r],t.prototype,"updaterStore",2);o([r],t.prototype,"activeGuild",2);o([r],t.prototype,"activeGuildId",2);o([r],t.prototype,"activeChannel",2);o([r],t.prototype,"activeChannelId",2);o([r],t.prototype,"memberListVisible",2);o([i],t.prototype,"setGatewayReady",1);o([i],t.prototype,"setAppLoading",1);o([i],t.prototype,"setUser",1);o([i],t.prototype,"setNetworkConnected",1);o([g],t.prototype,"isReady",1);o([i],t.prototype,"setActiveGuildId",1);o([i],t.prototype,"setActiveChannelId",1);o([i],t.prototype,"toggleMemberList",1);o([i],t.prototype,"windowToggleFps",1);o([i],t.prototype,"setToken",1);o([i],t.prototype,"loadToken",1);o([i],t.prototype,"logout",1);o([i],t.prototype,"setFpsShown",1);o([i],t.prototype,"loadFpsShown",1);o([i],t.prototype,"setUpdaterEnabled",1);o([i],t.prototype,"loadUpdaterEnabled",1);o([i],t.prototype,"loadSettings",1);const _=new t;function te(){return _}export{te as u};
//# sourceMappingURL=DdZuYVBDzIlP6vhxJUMJ.js.map
