import{o as j,R as i,u as y,r as b,j as e,F as w,a as A,b as o,g as L,c as S,p as C,d as P,v as G,l as R}from"./D1zPwdc9cyvUD_PRY_dc.js";import{A as s}from"./D35vTEu1qhbSmoZxDkZ8.js";import{L as k}from"./ClwnD9I8TtTluJEhA4-C.js";import{N as E}from"./DVqndjQgApqRYPKW0bHR.js";import{R as N}from"./ELuEkzvroYdyJCwXr_uN.js";import{E as v}from"./BTRZpqw0RH0DnQr-nBmY.js";import{L as V}from"./xeLt0iXiLDogDNxSUk1b.js";import{O as B}from"./BsYKU9Obw84PCk4rbigD.js";import{U as p}from"./CpE4SWiFQd7GJFNkkUOc.js";import{B as O}from"./CHVWewaBqhofhPnBvRM7.js";import{u as F}from"./DMCex30FeWvvThtDj-pY.js";import{A as m}from"./CdZZRonKPNKAJ-mGs3gI.js";import{L as T}from"./BZQWtPkIjMVHbdUOuaU2.js";import{C as I}from"./CponxOtWW4YUTFURZVCv.js";import{u as U}from"./DEKrkfWNVpi_Q5QzvrSJ.js";import{G as l}from"./BbvRrMjL3MsrffvEdAHV.js";import{i as W}from"./p91ReBh2MzHDYaH0T7ID.js";function D(){const t=U(),n=i.useContext(O),r=F("App"),c=y();return i.useEffect(()=>{const f=b(()=>t.token,a=>{a?(t.rest.setToken(a),t.gateway.readyState===WebSocket.CLOSED?(t.setGatewayReady(!1),t.gateway.connect(l.routeSettings.gateway)):r.debug("Gateway connect called but socket is not closed")):(r.debug("user no longer authenticated"),t.gateway.readyState===WebSocket.OPEN&&t.gateway.disconnect(1e3,"user is no longer authenticated"),c("/"))});return W&&(async()=>{const[a,g,u,d,x,h]=await Promise.all([L(),S(),C(),P(),G(),R()]);window.globals={tauriVersion:a,appVersion:g,platform:{name:u,arch:d,version:x,locale:h}}})(),l.load(),t.loadSettings(),r.debug("Loading complete"),t.setAppLoading(!1),f},[]),i.useEffect(()=>{t.isNetworkConnected?n.close():n.setContent({forced:!0,element:e.jsx(B,{})})},[t.isNetworkConnected,n]),e.jsxs(v,{section:"app",children:[t.fpsShown&&e.jsx(w,{}),e.jsx(V,{children:e.jsxs(A,{children:[e.jsx(o,{index:!0,path:"/",element:e.jsx(s,{component:m})}),e.jsx(o,{path:"/app",element:e.jsx(s,{component:m})}),e.jsx(o,{path:"/channels/:guildId/:channelId?",element:e.jsx(s,{component:I})}),e.jsx(o,{path:"/login",element:e.jsx(p,{component:k})}),e.jsx(o,{path:"/register",element:e.jsx(p,{component:N})}),e.jsx(o,{path:"/logout",element:e.jsx(s,{component:T})}),e.jsx(o,{path:"*",element:e.jsx(E,{})})]})})]})}const re=j(D);export{re as A};
//# sourceMappingURL=gYoKpXfZwMCZ_JSbmjvw.js.map
