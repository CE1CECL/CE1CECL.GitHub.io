import{R as D,Q as e,j as t,T as c}from"./D1zPwdc9cyvUD_PRY_dc.js";import{d as F}from"./p91ReBh2MzHDYaH0T7ID.js";import{M as R}from"./C8T8PEeOq-JDokn1dJ5_.js";import S from"./D7w726DpFkFHIFNrfInP.js";import{E as h,s as i}from"./1OnwJcBAwK9Nc__MrdF0.js";import{a as k,b as G}from"./DIQ2qdd66xJyHVkcEEr7.js";const o=300,C=640,H=24,V=["Spotify"];function X({embed:a}){var u,x,g,j,N,v,y,f;const A=D.useContext(k),T=Math.min(A-G,o);function _(s,l){const E=Math.min(s,T),M=Math.min(C,l),w=Math.min(E,M*(s/l)),I=Math.min(M,E*(l/s));return{width:w,height:I}}let r,n;const d=((u=a.provider)==null?void 0:u.name)==="GitHub"||((x=a.provider)==null?void 0:x.name)==="Streamable"||a.type===e.Video||a.type===e.GIFV||a.type===e.Image;if(a.image)r=((g=a.image)==null?void 0:g.width)??o,n=((j=a.image)==null?void 0:j.height)??0;else if(a.thumbnail)r=a.thumbnail.width??o,n=a.thumbnail.height??0;else switch((N=a.provider)==null?void 0:N.name){case"YouTube":case"Bandcamp":{r=((v=a.video)==null?void 0:v.width)??1280,n=((y=a.video)==null?void 0:y.height)??720;break}case"Twitch":case"Lightspeed":case"Streamable":{r=1280,n=720;break}default:r=o,n=1}const{width:m,height:p}=_(r,n);return a.type===e.GIFV||a.type===e.Image||a.type===e.Video||V.includes(((f=a.provider)==null?void 0:f.name)??"")?t.jsx(h,{embed:a,width:p,height:p}):t.jsx("div",{className:c(i.embed,i.website),style:{borderInlineStartColor:a.color?F(a.color):"var(--background-tertiary)",maxWidth:m+H},children:t.jsxs("div",{className:i.embedGap,children:[t.jsxs("div",{style:{display:"flex"},children:[t.jsxs("div",{className:i.embedGap,children:[a.type!==e.Rich&&a.provider&&t.jsx("span",{className:i.embedProvider,children:a.provider.name}),a.author&&t.jsxs("div",{className:i.embedAuthor,children:[a.author.icon_url&&t.jsx("img",{loading:"lazy",className:i.embedAuthorIcon,src:a.author.icon_url,draggable:!1,onError:s=>s.currentTarget.style.display="none"}),a.author.url?t.jsx("a",{href:a.url,target:"_blank",className:c(i.embedAuthorName,i.embedAuthorNameLink),children:a.author.name}):t.jsx("span",{className:i.embedAuthorName,children:a.author.name})]}),a.title&&t.jsx(t.Fragment,{children:a.url?t.jsx("a",{href:a.url,target:"_blank",className:c(i.embedTitle,i.embedTitleLink),children:a.title}):t.jsx("span",{className:i.embedTitle,children:a.title})}),a.description&&t.jsx("div",{className:i.embedDescription,children:t.jsx(S,{content:a.description})}),a.fields&&t.jsx("div",{className:i.embedFields,children:a.fields.map((s,l)=>t.jsxs("div",{className:i.embedField,style:{gridColumn:s.inline?l%2===0?"1 / 7":"7 / 13":"1 / 13"},children:[t.jsx("div",{className:i.embedFieldName,children:s.name}),t.jsx("div",{className:i.embedFieldValue,children:t.jsx(R,{content:s.value})})]},l))})]}),(!d||a.type===e.Rich)&&a.thumbnail&&t.jsx("div",{children:t.jsx(h,{embed:a,width:80,thumbnail:!0})})]}),(d||a.type===e.Rich)&&t.jsx("div",{children:t.jsx(h,{embed:a,width:m})}),a.footer&&t.jsxs("div",{className:i.embedFooter,children:[a.footer.icon_url&&t.jsx("img",{loading:"lazy",className:i.embedFooterIcon,src:a.footer.icon_url,draggable:!1,onError:s=>s.currentTarget.style.display="none"}),t.jsxs("span",{className:i.embedFooterText,children:[a.footer.text,a.timestamp&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:i.embedFooterSeperator,children:"â€¢"}),new Date(a.timestamp).toLocaleString(void 0)]})]})]})]})})}export{X as M};
//# sourceMappingURL=kVFIEJ1cvDJbtIkbxTZQ.js.map
