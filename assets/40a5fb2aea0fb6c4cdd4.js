(this.webpackJsonp=this.webpackJsonp||[]).push([[77],{12149:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=void 0;var i,r=(i=n(12150))&&i.__esModule?i:{default:i},a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=i?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=t[r]}n.default=t;e&&e.set(t,n);return n}(n(12151));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;s=function(){return t};return t}function u(t,e,n,i,r,a,s){try{var u=t[a](s),o=u.value}catch(t){n(t);return}u.done?e(o):Promise.resolve(o).then(i,r)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(t){
u(a,i,r,s,o,"next",t)}function o(t){u(a,i,r,s,o,"throw",t)}s(void 0)}))}}function c(t,e,n,i,r){return l.apply(this,arguments)}function l(){return(l=o(regeneratorRuntime.mark((function t(e,n,i,s,u){var o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(o=u)){t.next=10;break}t.next=4;return fetch(s);case 4:if((c=t.sent).ok){t.next=7;break}throw new Error("Error fetching sticker at "+s);case 7:t.next=9;return c.text();case 9:o=t.sent;case 10:if(null!=o){t.next=12;break}return t.abrupt("return",null);case 12:t.next=14;return(0,a.initialize)();case 14:l=new a.default(o);return t.abrupt("return",new r.default(l,e,n,i));case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var h=new(function(){function t(){this.entries=[];this.referenceCounts=new Map}var e=t.prototype;e.create=function(t,e,n,i,r,a){var s=this;void 0===a&&(a=!0);return this.getCached(t).then((function(u){var o
;s.referenceCounts.set(t,(null!==(o=s.referenceCounts.get(t))&&void 0!==o?o:0)+1);if(u)return u;var l={key:t,promise:c(t,e,n,i,r)};if(a){s.entries.push(l);l.promise.then((function(e){null==e&&s.removeEntry(t);return e})).catch((function(e){return s.removeEntry(t)}));s.entries.length>50&&s.removeEntryAt(0)}return l.promise}))};e.drop=function(t){this.removeEntry(t)};e.getCached=function(t){var e=this,n=this.entries.findIndex((function(e){return e.key===t}));if(n>=0){var i=this.entries[n];this.entries.splice(n,1);this.entries.push(i);return i.promise.then((function(t){null==t&&e.removeEntryAt(n);return t}))}return Promise.resolve(null)};e.removeEntry=function(t){var e=this.entries.findIndex((function(e){return e.key===t}));if(!(e>=0))return null;this.removeEntryAt(e)};e.removeEntryAt=function(t){var e=this.entries[t],n=this.referenceCounts.get(e.key);if(null!=n&&n>1){this.referenceCounts.set(e.key,n-1);return null}this.entries.splice(t,1);this.referenceCounts.delete(e.key)
;e.promise.then((function(t){return null==t?void 0:t.drop()}));return e};return t}());e.default=h},12150:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=void 0;var i=function(){function t(t,e,n,i){var r=function(t,e,n){var i=Math.sqrt(n),r=Math.ceil(i);return[r,r*t,r*e]}(n,i,t.frames),a=r[0],s=r[1],u=r[2];this.key=e;this.canvas=function(t,e){if("function"==typeof OffscreenCanvas)return new OffscreenCanvas(t,e);var n=document.createElement("canvas");n.width=t;n.height=e;return n}(s,u);this.context=this.canvas.getContext("2d");this.cells=a;this.native=t;this.renderedFrames=new Set;this.frameWidth=n;this.frameHeight=i;this.frameRate=t.fps;this.frameCount=t.frames;if(null==this.context)throw new Error("couldn't create 2d canvas context.")}var e=t.prototype;e.drawInto=function(t,e,n,i){e%=this.frameCount;this.requireFrame(e);var a=r(e,this.frameWidth,this.frameHeight,this.cells),s=a[0],u=a[1],o=a[2],c=a[3];t.drawImage(this.canvas,s,u,o,c,0,0,n,i)}
;e.drop=function(){var t;null===(t=this.native)||void 0===t||t.drop();this.native=null};e.requireFrame=function(t){if(null!=this.native){if(!this.renderedFrames.has(t)){this.paint(t);this.renderedFrames.add(t)}this.renderedFrames.size===this.frameCount&&this.drop()}};e.paint=function(t){if(null!=this.native){var e,n=this.native.get_bgra(t,this.frameWidth,this.frameHeight),i=new ImageData(n,this.frameWidth,this.frameHeight),a=r(t,this.frameWidth,this.frameHeight,this.cells),s=a[0],u=a[1],o=a[2],c=a[3];null===(e=this.context)||void 0===e||e.putImageData(i,s,u,0,0,o,c)}};return t}();e.default=i;function r(t,e,n,i){return[Math.floor(t/i)*e,t%i*n,e,n]}},12151:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=e.initialize=void 0;var i,r=(i=n(26))&&i.__esModule?i:{default:i},a=n(6048);function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}
function u(t,e,n,i,r,a,s){try{var u=t[a](s),o=u.value}catch(t){n(t);return}u.done?e(o):Promise.resolve(o).then(i,r)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(t){u(a,i,r,s,o,"next",t)}function o(t){u(a,i,r,s,o,"throw",t)}s(void 0)}))}}var c,l,h,f,d,m,v,p,y,w=(0,a.createQueuedAsyncInitializer)(o(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return n.e(78).then(n.t.bind(null,12169,7));case 2:e=t.sent;t.next=5;return e.default();case 5:i=t.sent;h=i.cwrap("lottie_create","number",["string"]);f=i._lottie_destroy;d=i._lottie_draw_into_bgra;m=i._lottie_draw_into_rgba;v=i._lottie_frame_count;p=i._lottie_frame_rate;y=i._memory_create;c=i;l=y(409600);case 15:case"end":return t.stop()}}),t)}))));e.initialize=w;function g(t,e){return new Uint8ClampedArray(c.HEAPU8.buffer,l,t*e*4)}var b=function(){function t(t){this.native=h(t)
;if(0===this.native)throw new Error("couldn't create wasm lottie. potentially bad json.")}var e=t.prototype;e.get_bgra=function(t,e,n){(0,r.default)(e<=320,"width exceeds static allocation.");(0,r.default)(n<=320,"height exceeds static allocation.");d(this.native,l,t,e,n);return g(e,n)};e.get_rgba=function(t,e,n){(0,r.default)(e<=320,"width exceeds static allocation.");(0,r.default)(n<=320,"height exceeds static allocation.");m(this.native,l,t,e,n);return g(e,n)};e.drop=function(){f(this.native)};!function(t,e,n){e&&s(t.prototype,e);n&&s(t,n)}(t,[{key:"fps",get:function(){return p(this.native)}},{key:"frames",get:function(){return v(this.native)}}]);return t}();e.default=b},7992:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=void 0;var i=a(n(26)),r=a(n(12149));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(t){
var e=this,n=t.canvas,a=t.id,s=t.assetUrl,u=t.assetData,o=t.isVisible,c=t.shouldAnimate,l=t.onInitialDraw,h=t.onError;this.animation=null;this.onInitialAnimationTick=function(t){e.requestAnimationFrameId=null;if(performance.now()-t<30&&e.draw(0)){var n;e.resumeAnimation();null===(n=e.onInitialDraw)||void 0===n||n.call(e);e.hasInitialFrame=!0}e.scheduleOrCancelTick()};this.onAnimationTick=function(t){e.requestAnimationFrameId=null;var n=performance.now(),i=Math.floor((t-e.currentFrameTime)/e.frameDuration);if(i>0){if(n-t<12){e.draw(e.currentFrame);e.currentFrame+=i}e.currentFrameTime+=i*e.frameDuration}e.scheduleOrCancelTick()};var f=n.getContext("2d");(0,i.default)(null!=f,"couldn't get canvas 2d context.");this.canvas=n;this.canvasContext=f;this.animation=null;this.dropped=!1;this.currentFrame=0;this.currentFrameTime=0;this.frameDuration=1e3;this.animate=c;this.visible=o;this.requestAnimationFrameId=null;this.hasInitialFrame=!1;this.onInitialDraw=l;this.onError=h
;this.key=a+":"+n.width+":"+n.height;r.default.create(this.key,n.width,n.height,s,u).then((function(t){if(null!=t)if(e.dropped)r.default.drop(e.key);else{e.animation=t;e.frameDuration=1e3/t.frameRate;e.scheduleOrCancelTick()}})).catch((function(t){null==h||h()}))}var e=t.prototype;e.setState=function(t,e){if(null!=e){t||e===this.currentFrame||this.draw(e);this.currentFrame=e}t&&!this.animate&&this.resumeAnimation();this.animate=t;this.scheduleOrCancelTick()};e.setVisibility=function(t){var e=this.visible;this.visible=t;this.visible&&!e&&this.resumeAnimation();this.scheduleOrCancelTick()};e.resumeAnimation=function(){this.currentFrameTime=performance.now()};e.clear=function(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)};e.draw=function(t){if(null!=this.animation){this.clear();this.animation.drawInto(this.canvasContext,t,this.canvas.width,this.canvas.height);return!0}return!1};e.drop=function(){this.animate=!1;this.scheduleOrCancelTick()
;r.default.drop(this.key);this.animation=null;this.dropped=!0};e.scheduleOrCancelTick=function(){this.dropped||(this.hasInitialFrame?this.requestAnimationFrame(this.animate&&this.visible?this.onAnimationTick:null):this.requestAnimationFrame(this.onInitialAnimationTick))};e.requestAnimationFrame=function(t){function e(e){return t.apply(this,arguments)}e.toString=function(){return t.toString()};return e}((function(t){null!=t&&null==this.requestAnimationFrameId&&(this.requestAnimationFrameId=requestAnimationFrame(t));if(null!=t&&null!=this.requestAnimationFrameId){cancelAnimationFrame(this.requestAnimationFrameId);this.requestAnimationFrameId=requestAnimationFrame(t)}if(null==t&&null!=this.requestAnimationFrameId){cancelAnimationFrame(this.requestAnimationFrameId);this.requestAnimationFrameId=null}}));return t}();e.default=s}}]);
//# sourceMappingURL=40a5fb2aea0fb6c4cdd4.js.map