"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[98987],{873039:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.ExperimentInAppReporting=void 0;var r,i=n(413577),a=(r=n(686524))&&r.__esModule?r:{default:r},o=n(398521);var u=(0,i.registerUserExperiment)({id:a.default.IN_APP_REPORTING,title:"2020-29 Exp: Report TOS violating messages in-app via new modal",description:["An experiment that tests if in-app reporting is useful for Trust & Safety","Control: No changes","Treatment 1: Add menu options to report message"],buckets:[o.ExperimentBuckets.CONTROL,o.ExperimentBuckets.TREATMENT_1]});t.ExperimentInAppReporting=u},124042:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.GuildFeedSectionTypes=t.GuildFeedRenderMode=t.GUILD_FEED_CHANNEL_TYPES=t.FeedItemInteractionType=t.COLLAPSED_SIZE_MEDIA_QUERY=void 0;var r,i,a,o=n(723360);t.FeedItemInteractionType=r;!function(e){e.MESSAGE_CLICKED="message_clicked"
;e.MESSAGE_CHANNEL_CLICKED="message_channel_clicked";e.REACTION_ADDED="reaction_added";e.REACTION_REMOVED="reaction_removed";e.THREAD_EMBED_CLICKED="thread_embed_clicked";e.LINK_CLICKED="link_clicked";e.IMAGE_CLICKED="image_clicked";e.BUTTON_CLICKED="button_clicked";e.REFERENCED_MESSAGE_CLICKED="referenced_message_clicked"}(r||(t.FeedItemInteractionType=r={}));t.GuildFeedSectionTypes=i;!function(e){e.UNREAD="UNREAD";e.READ="READ";e.HIGHLIGHTED="HIGHLIGHTED";e.ALL="ALL"}(i||(t.GuildFeedSectionTypes=i={}));t.GuildFeedRenderMode=a;!function(e){e[e.SEGMENTED_READ=0]="SEGMENTED_READ";e[e.TOP=1]="TOP";e[e.NEW=2]="NEW"}(a||(t.GuildFeedRenderMode=a={}));t.COLLAPSED_SIZE_MEDIA_QUERY="(max-width: 1300px)";var u=new Set([o.ChannelTypes.GUILD_TEXT,o.ChannelTypes.GUILD_ANNOUNCEMENT,o.ChannelTypes.GUILD_FORUM]);t.GUILD_FEED_CHANNEL_TYPES=u},968078:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=t.LoadingStatus=t.GUILD_FEED_FETCH_LIMIT=void 0
;var r,i=y(n(536211)),a=y(n(232347)),o=y(n(636602)),u=n(202929),l=y(n(423046)),d=n(676525),s=n(4024),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}r.default=e;n&&n.set(e,r);return r}(n(676509)),f=n(124042),p=n(770348),E=n(173652);function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function y(e){return e&&e.__esModule?e:{default:e}}function v(e,t){v=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return v(e,t)}function g(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){
if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=m(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}
function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h;t.GUILD_FEED_FETCH_LIMIT=10;t.LoadingStatus=h;!function(e){e[e.LOADING_FRESH_FEED=0]="LOADING_FRESH_FEED";e[e.LOADING_PAGE=1]="LOADING_PAGE";e[e.NONE=2]="NONE"}(h||(t.LoadingStatus=h={}));var S={loading:h.NONE,error:null},M={offset:null,hasMoreItems:null},A={},D={},F={},O={},G={},b={},L={};function P(e){var t=L[e];if(null==t){t=new a.default(C,R);L[e]=t}return t}function R(e){return""+(e.featured?"\0":"")+e.sortIndex.toString().padStart(5,"0")}function C(e){var t=e.seen,n=e.highlighted,r=[f.GuildFeedSectionTypes.ALL];n?r.push(f.GuildFeedSectionTypes.HIGHLIGHTED):t?r.push(f.GuildFeedSectionTypes.READ):r.push(f.GuildFeedSectionTypes.UNREAD);return r}var N={},w={},U={};function j(e,t,n){var r,i;return null===(r=b[e])||void 0===r||null===(i=r[t])||void 0===i?void 0:i[n]}function k(e,t){var n;return null===(n=G[e])||void 0===n?void 0:n[t]}function H(e,t,n){
if(null==e||null==t)return!1;var r=k(e,t);if(null==r)return!1;var i=j(r,e,t);if(null==i)return!1;var a=n(i);b[r][e][t]=a;return!0}function x(e,t){var n;if(null==(null===(n=b[e])||void 0===n?void 0:n[t.channel_id])){var r;b[e]=null!==(r=b[e])&&void 0!==r?r:{};b[e][t.channel_id]={}}b[e][t.channel_id][t.id]=t;null==G[t.channel_id]&&(G[t.channel_id]={});G[t.channel_id][t.id]=e}function V(e,t){var n=function(e,t){for(var n,r=I(P(e).values(f.GuildFeedSectionTypes.ALL));!(n=r()).done;){var i,a=n.value;if((null==a||null===(i=a.message)||void 0===i?void 0:i.id)===t)return a}}(e,t);if(null!=n){var r=(0,c.default)(n);P(e).delete(r)}}function K(e,t){var n,r,i,a=k(e,t);if(null==a)return!1;null===(n=b[a])||void 0===n||(null===(r=n[e])||void 0===r||delete r[t]);null===(i=G[e])||void 0===i||delete i[t];V(a,t);return!0}function W(e){var t=e.type,n=e.channelId,r=e.messageId,i=e.userId,a=e.emoji,o=e.optimistic,u=l.default.getId()===i;return!(o&&!u)&&H(n,r,(function(e){
return t===p.ActionTypes.MESSAGE_REACTION_ADD?e.addReaction(a,u):e.removeReaction(a,u)}))}function Y(e){return B(e.channel)}function B(e){var t,n=e.guild_id;if(null==n)return!1;delete G[e.id];null===(t=b[n])||void 0===t||delete t[e.id]}var $=new(function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;v(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.getLastFetchedMillis=function(e){return A[e]};n.getFeedItemSection=function(e,t){return P(e).values(t)};n.getItem=function(e,t){return P(e).get(t)};n.getItemForMessageId=function(e,t){var n;return null!==(n=this.getItem(e,(0,c.GUILD_FEED_MESSAGE_ITEM_ID_TEMPLATE)(t)))&&void 0!==n?n:this.getItem(e,(0,c.GUILD_FEED_POST_ITEM_ID_TEMPLATE)(t))};n.getMessageItem=function(e,t){return this.getItem(e,(0,c.GUILD_FEED_MESSAGE_ITEM_ID_TEMPLATE)(t))};n.getLoadId=function(e){var t;return null===(t=O[e])||void 0===t?void 0:t.load_id};n.getCachedMessage=function(e,t,n){return j(e,t,n)}
;n.getFetchStatus=function(e){var t;return null!==(t=D[e])&&void 0!==t?t:S};n.getPaginationStatus=function(e){var t;return null!==(t=F[e])&&void 0!==t?t:M};n.getIsItemHiding=function(e,t){var n;return!!(null===(n=N[e])||void 0===n?void 0:n.has(t))};n.getIsItemHidden=function(e,t){var n;return!!(null===(n=w[e])||void 0===n?void 0:n.has(t))};n.getIsItemFeatured=function(e){var t,n=(0,c.getGuildFeedItemIdFromFeatureableItem)(e),r=e.guildId;return!!(null===(t=U[r])||void 0===t?void 0:t.has(n))};n.__getLocalVars=function(){return{DEFAULT_FETCH_STATUS:S,DEFAULT_PAGINATION_STATUS:M,lastFetchedMillisByGuild:A,fetchStatusByGuild:D,paginationStatusByGuild:F,dataByGuild:O,messageToGuildIdMap:G,messageCache:b,feedItemMapByGuildId:L,KEY_PAD_LENGTH:5,hidingItems:N,hiddenItems:w,featuredItems:U}};return t}(i.default.Store))(o.default,((r={})[p.ActionTypes.GUILD_FEED_FETCH_FRESH_START]=function(e){var t=e.guildId;D[t]={loading:h.LOADING_FRESH_FEED,error:null};delete L[t];delete O[t];delete F[t]
;N[t]=new Set;w[t]=new Set;U[t]=new Set;b[t]={}},r[p.ActionTypes.GUILD_FEED_FETCH_PAGE_START]=function(e){var t=e.guildId;D[t]={loading:h.LOADING_PAGE,error:null}},r[p.ActionTypes.GUILD_FEED_FETCH_SUCCESS]=function(e){var t,n,r,i,a,o=e.guildId,u=e.data;A[o]=Date.now();D[o]={loading:h.NONE,error:null};if(!(o in O)||O[o].load_id===u.load_id){var l=null!==(t=null===(n=O[o])||void 0===n||null===(r=n.results)||void 0===r?void 0:r.items)&&void 0!==t?t:[];O[o]={load_id:u.load_id,results:{items:l.concat(u.results.items)}};for(var s,c=P(o),f=c.values().length,p=f,E=I(u.results.items);!(s=E()).done;){var _=s.value;if("message"in _){var y=(0,d.createGuildFeedItemFromServer)(_,p);if(null!=y){p+=1;if(null==c.get(y.id)){y.featured&&U[o].add(y.id);x(o,y.message);c.set(y.id,y)}}}}var v=null!==(i=null===(a=F[o])||void 0===a?void 0:a.offset)&&void 0!==i?i:0;F[o]={offset:v+10,hasMoreItems:f!==c.values().length}}},r[p.ActionTypes.GUILD_FEED_FETCH_FAILURE]=function(e){var t=e.guildId,n=e.error;D[t]={
loading:h.NONE,error:n}},r[p.ActionTypes.GUILD_FEED_ITEM_REMOVE]=function(e){var t=e.item;return K(t.message.channel_id,t.message.id)},r[p.ActionTypes.GUILD_FEED_ITEM_HIDE]=function(e){var t=e.item,n=(0,c.default)(t),r=k(t.message.channel_id,t.message.id);if(null!=r){r in N||(N[r]=new Set);N[r].add(n)}},r[p.ActionTypes.GUILD_FEED_ITEM_UNHIDE]=function(e){var t=e.item,n=(0,c.default)(t),r=k(t.message.channel_id,t.message.id);null!=r&&N[r].delete(n)},r[p.ActionTypes.GUILD_FEED_FEATURE_ITEM]=function(e){var t,n,r,i=e.featureableItem,a=e.options,o=i.guildId,u=(0,c.getGuildFeedItemIdFromFeatureableItem)(i);o in U||(U[o]=new Set);U[o].add(u);if(a.hoist){var l=P(o),d=null!==(t=l.get(u))&&void 0!==t?t:(0,s.createFakeGuildFeedItem)(i);if(null!=d){null!=d.message&&null==(null===(n=b[o])||void 0===n||null===(r=n[d.message.channel_id])||void 0===r?void 0:r[d.message.id])&&x(o,d.message);l.delete(d.id);d.featured=!0;d.seen=!1;l.set(d.id,d)}}},r[p.ActionTypes.GUILD_FEED_UNFEATURE_ITEM]=function(e){
var t,n=e.featureableItem,r=n.guildId,i=(0,c.getGuildFeedItemIdFromFeatureableItem)(n);null===(t=U[r])||void 0===t||t.delete(i)},r[p.ActionTypes.CHANNEL_SELECT]=function(){for(var e=0,t=Object.keys(N);e<t.length;e++){var n=t[e];null==w[n]&&(w[n]=new Set);w[n]=new Set([].concat(g(Array.from(w[n])),g(Array.from(N[n]))));delete N[n]}},r[p.ActionTypes.CHANNEL_DELETE]=Y,r[p.ActionTypes.THREAD_DELETE]=Y,r[p.ActionTypes.GUILD_DELETE]=function(e){var t=e.guild;if(null==A[t.id])return!1;delete A[t.id];delete O[t.id];for(var n in null!==(r=b[t.id])&&void 0!==r?r:{}){var r;delete G[n]}delete b[t.id];delete L[t.id]},r[p.ActionTypes.CHANNEL_UPDATES]=function(e){for(var t,n=I(e.updates);!(t=n()).done;){var r=t.value.channel;if(null==r?void 0:r.hasFlag(E.ChannelFlags.GUILD_FEED_REMOVED))return B(r)}},r[p.ActionTypes.LOGOUT]=function(){A={};O={};G={};b={};L={};N={};w={};U={}},r[p.ActionTypes.MESSAGE_UPDATE]=function(e){var t=e.message;return H(t.channel_id,t.id,(function(e){return(0,
u.updateMessageRecord)(e,t)}))},r[p.ActionTypes.MESSAGE_DELETE]=function(e){var t=e.id;return K(e.channelId,t)},r[p.ActionTypes.MESSAGE_DELETE_BULK]=function(e){for(var t,n=e.ids,r=e.channelId,i=!1,a=I(n);!(t=a()).done;){i=K(r,t.value)||i}return i},r[p.ActionTypes.MESSAGE_REACTION_ADD]=W,r[p.ActionTypes.MESSAGE_REACTION_REMOVE]=W,r[p.ActionTypes.MESSAGE_REACTION_REMOVE_ALL]=function(e){return H(e.channelId,e.messageId,(function(e){return e.set("reactions",[])}))},r[p.ActionTypes.MESSAGE_REACTION_REMOVE_EMOJI]=function(e){var t=e.channelId,n=e.messageId,r=e.emoji;return H(t,n,(function(e){return e.removeReactionsForEmoji(r)}))},r));t.default=$},676525:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.createFeatureItemsTimeLabel=void 0;t.createGuildFeedItemFromServer=function(e,t){switch(e.type){case i.GuildFeedItemTypes.FORUM_POST:var n=(0,o.createMessageRecord)(e.message),a=u.default.fromServer(e.thread);return{type:i.GuildFeedItemTypes.FORUM_POST,id:(0,l.default)(e),
sortIndex:t,message:n,thread:a,featured:e.featured,highlighted:e.highlighted,seen:e.seen};case i.GuildFeedItemTypes.MESSAGE:var d=(0,o.createMessageRecord)(e.message),s=r.default.map(e.reference_messages,(function(e){return(0,o.createMessageRecord)(e)}));return{type:i.GuildFeedItemTypes.MESSAGE,id:(0,l.default)(e),sortIndex:t,message:d,referenceMessages:s,featured:e.featured,highlighted:e.highlighted,seen:e.seen};default:return null}};t.getFeatureItemsTimes=void 0;t.isChannelAvailableInGuildFeed=function(e){if(e.hasFlag(d.ChannelFlags.GUILD_FEED_REMOVED))return!1;if(e.isNSFW())return!1;return!0};t.isMessageAvailableInGuildFeed=function(e){if(!a.MessageTypesSets.AVAILABLE_IN_GUILD_FEED.has(e.type))return!1;return!0};var r=c(n(496486)),i=n(177661),a=n(234856),o=n(202929),u=c(n(567186)),l=c(n(676509)),d=n(173652),s=c(n(247001));function c(e){return e&&e.__esModule?e:{default:e}}var f={ONE_DAY:86400,THREE_DAYS:259200,SEVEN_DAYS:604800};t.createFeatureItemsTimeLabel=function(e){
return s.default.Messages.GUILD_FEED_FEATURE_ITEM_MENU_ITEM_TEXT.format({timePeriod:e})};t.getFeatureItemsTimes=function(){return[{value:f.ONE_DAY,timePeriod:s.default.Messages.GUILD_FEED_FEATURE_ITEM_24_HOURS},{value:f.THREE_DAYS,timePeriod:s.default.Messages.GUILD_FEED_FEATURE_ITEM_THREE_DAYS},{value:f.SEVEN_DAYS,timePeriod:s.default.Messages.GUILD_FEED_FEATURE_ITEM_SEVEN_DAYS}]}},4024:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.createFakeGuildFeedItem=function(e){switch(e.entityType){case i.GuildFeedItemTypes.FORUM_POST:var t=e.entity.id,n=a.default.getMessage(t).firstMessage;return null==n?null:{type:i.GuildFeedItemTypes.FORUM_POST,id:(0,u.getGuildFeedItemIdFromFeatureableItem)(e),sortIndex:0,message:n,thread:e.entity,featured:!0,seen:!1,highlighted:!1};case i.GuildFeedItemTypes.MESSAGE:return{type:i.GuildFeedItemTypes.MESSAGE,id:(0,u.getGuildFeedItemIdFromFeatureableItem)(e),sortIndex:0,message:e.entity,referenceMessages:[],featured:!0,seen:!1,highlighted:!1}}}
;t.default=function(e){switch(e.entityType){case i.GuildFeedItemTypes.FORUM_POST:return{entityId:e.entity.id,details:{parent_channel_id:e.entity.parent_id},entityType:e.entityType,guildId:e.guildId};case i.GuildFeedItemTypes.MESSAGE:return{entityId:e.entity.id,details:{channel_id:e.entity.channel_id},entityType:e.entityType,guildId:e.guildId};default:(0,o.assertNever)(e)}};var r,i=n(177661),a=(r=n(179401))&&r.__esModule?r:{default:r},o=n(71246),u=n(676509)},676509:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.GUILD_FEED_POST_ITEM_ID_TEMPLATE=t.GUILD_FEED_MESSAGE_ITEM_ID_TEMPLATE=void 0;t.default=function(e){switch(e.type){case r.GuildFeedItemTypes.FORUM_POST:return a(e.message.id);case r.GuildFeedItemTypes.MESSAGE:return o(e.message.id);default:(0,i.assertNever)(e)}};t.getGuildFeedItemIdFromFeatureableItem=function(e){switch(e.entityType){case r.GuildFeedItemTypes.FORUM_POST:return a(e.entity.id);case r.GuildFeedItemTypes.MESSAGE:return o(e.entity.id);default:(0,
i.assertNever)(e)}};t.getSnowflakeFromGuildFeedItemId=function(e){return e.split("/")[1]};var r=n(177661),i=n(71246),a=function(e){return r.GuildFeedItemTypes.FORUM_POST+"/"+e};t.GUILD_FEED_POST_ITEM_ID_TEMPLATE=a;var o=function(e){return r.GuildFeedItemTypes.MESSAGE+"/"+e};t.GUILD_FEED_MESSAGE_ITEM_ID_TEMPLATE=o},85255:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,i=u(n(536211)),a=u(n(636602)),o=n(770348);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){l=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return l(e,t)}var d={};var s=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;l(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.getOptions=function(e){return d[e]};n.__getLocalVars=function(){return{options:d}};return t}(i.default.Store);s.displayName="SendMessageOptionsStore"
;var c=new s(a.default,((r={})[o.ActionTypes.MESSAGE_CREATE]=function(e){var t=e.message,n=e.sendMessageOptions;null!=n&&(d[t.id]=n);null!=t.nonce&&t.nonce in d&&delete d[t.nonce]},r));t.default=c},172235:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.canGuildFeedFeatureMessage=function(e,t){var n=e.getGuildId();if(null===n||!(0,a.canSeeGuildHome)(n))return!1;if(!u.ChannelTypesSets.GUILD_FEED_FEATURABLE_MESSAGES.has(e.type))return!1;if(!(0,i.isChannelAvailableInGuildFeed)(e))return!1;if(!(0,i.isMessageAvailableInGuildFeed)(t))return!1;if(!o.default.can(d,e))return!1;return!0};var r=l(n(267258)),i=n(676525),a=n(566627),o=l(n(689389)),u=n(770348);function l(e){return e&&e.__esModule?e:{default:e}}var d=r.default.combine(u.Permissions.VIEW_CHANNEL,u.Permissions.MANAGE_MESSAGES,u.Permissions.READ_MESSAGE_HISTORY)},141234:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n,r){void 0===r&&(r={});i.default.deleteMessage(e.id,t.id,!0)
;if(t.isCommandType()){null!=t.interactionData&&r.applicationId&&(0,a.retryCommandMessage)(t,e,r.applicationId);return}var o=t.content,u=t.tts;i.default.sendMessage(e.id,{content:o,tts:u,invalidEmojis:[],validNonShortcutEmojis:[]},void 0,r)};var r,i=(r=n(786345))&&r.__esModule?r:{default:r},a=n(462936)},839570:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.configureJoin=function(e){var t=e.getGuildId();null!=t&&l.default.open(t,m.GuildSettingsSections.OVERVIEW)};t.copyId=function(e,t,n){(0,_.copy)(n.shiftKey?t.channel_id+"-"+t.id:t.id)};t.copyLink=function(e,t){(0,_.copy)(location.protocol+"//"+location.host+m.Routes.CHANNEL(e.guild_id,e.id,t.id))};t.createThread=function(e,t){(0,c.openThreadSidebarForCreating)(e,t,"Message")};t.deleteMessage=function(e,t,n){t.state===m.MessageStates.SEND_FAILED||n.shiftKey?a.default.deleteMessage(e.id,t.id,t.state===m.MessageStates.SEND_FAILED):o.default.confirmDelete(e,t)};t.editMessage=function(e,t){
a.default.startEditMessage(e.id,t.id,t.content)};t.gotoThread=function(e,t){var n=p.default.getChannel(t.id);null!=n&&(0,c.openThreadSidebarForViewing)(n)};t.markMessageUnread=function(e,t){(0,g.default)(e.id,t.id)};t.pinMessage=function(e,t,n){if(!1===t.pinned){n.shiftKey?i.default.pinMessage(e,t.id):o.default.confirmPin(e,t);return}n.shiftKey?i.default.unpinMessage(e,t.id):o.default.confirmUnpin(e,t)};t.publishMessage=function(e,t){(0,u.default)(e.id,t.id)};t.replyToMessage=function(e,t,n){var r=e.isPrivate(),i=null!=t.webhookId,a=t.author.id===f.default.getId();(0,s.createPendingReply)({channel:e,message:t,shouldMention:!n.shiftKey&&!i&&!a,showMentionToggle:!r&&!i&&!a});y.ComponentDispatch.dispatchToLastSubscribed(m.ComponentActions.TEXTAREA_FOCUS)};t.reportMessage=function(e){(0,d.showReportModalForMessage)(e)};t.retrySendMessage=function(e,t){(0,I.default)(e,t,void 0,v.default.getOptions(t.id))};t.showReactionsModal=function(e,t,i){(0,
E.openModalLazy)(A(regeneratorRuntime.mark((function e(){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return Promise.resolve().then(n.bind(n,556961));case 2:a=e.sent;o=a.default;return e.abrupt("return",(function(e){return r.createElement(o,S({},e,{message:t,selectedReaction:i}))}));case 5:case"end":return e.stop()}}),e)}))))};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}r.default=e;n&&n.set(e,r);return r
}(n(667294)),i=T(n(56911)),a=T(n(786345)),o=T(n(836943)),u=T(n(239260)),l=T(n(964285)),d=n(837797),s=n(886090),c=n(682640),f=T(n(423046)),p=T(n(644263)),E=n(194322),_=n(856384),y=n(956506),v=T(n(85255)),g=T(n(501542)),I=T(n(141234)),m=n(770348);function T(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function S(){S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return S.apply(this,arguments)}function M(e,t,n,r,i,a,o){try{var u=e[a](o),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,i)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){M(a,r,i,o,u,"next",e)}function u(e){M(a,r,i,o,u,"throw",e)}o(void 0)}))}}},885798:(e,t,n)=>{Object.defineProperty(t,"__esModule",{
value:!0});t.default=I;var r,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}r.default=e;n&&n.set(e,r);return r}(n(667294)),a=n(177661),o=n(536211),u=p(n(968078)),l=n(676525),d=n(145122),s=n(194322),c=n(172235),f=p(n(247001));function p(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function _(e,t,n,i){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){
for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&a)for(var d in a)void 0===t[d]&&(t[d]=a[d]);else t||(t=a||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function y(){y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return y.apply(this,arguments)}function v(e,t,n,r,i,a,o){try{var u=e[a](o),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,i)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){v(a,r,i,o,u,"next",e)}function u(e){v(a,r,i,o,u,"throw",e)}o(void 0)}))}}function I(e,t,r){var p=t.getGuildId(),E=(0,o.useStateFromStores)([u.default],(function(){return null!==p&&u.default.getIsItemFeatured({guildId:p,entity:e,entityType:a.GuildFeedItemTypes.MESSAGE})}),[e,p]);return(0,
c.canGuildFeedFeatureMessage)(t,e)?E?_(d.MenuItem,{id:"guild-feed-unfeature",label:f.default.Messages.GUILD_FEED_UNFEATURE_MESSAGE,action:function(){return null==p?null:(0,s.openModalLazy)(g(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return Promise.all([n.e(40532),n.e(20013)]).then(n.bind(n,820013));case 2:r=t.sent;o=r.UnfeatureItemConfirmationModal;return t.abrupt("return",(function(t){return i.createElement(o,y({},t,{featureableItem:{guildId:p,entity:e,entityType:a.GuildFeedItemTypes.MESSAGE},header:f.default.Messages.GUILD_FEED_UNFEATURED_MESSAGE_MODAL_HEADER,body:f.default.Messages.GUILD_FEED_UNFEATURED_MESSAGE_MODAL_BODY}))}));case 5:case"end":return t.stop()}}),t)}))))}}):_(d.MenuItem,{id:"guild-feed-feature",label:f.default.Messages.GUILD_FEED_FEATURE_MESSAGE},void 0,(0,l.getFeatureItemsTimes)().map((function(a){var o=a.value,u=a.timePeriod;return _(d.MenuItem,{id:""+o,label:(0,
l.createFeatureItemsTimeLabel)(u),action:function(){return null==p?null:(0,s.openModalLazy)(g(regeneratorRuntime.mark((function a(){var l,d;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.next=2;return Promise.all([n.e(40532),n.e(20013)]).then(n.bind(n,820013));case 2:l=a.sent;d=l.FeatureMessageConfirmationModal;return a.abrupt("return",(function(n){return i.createElement(d,y({},n,{message:e,channel:t,guildId:p,expiresSeconds:o,timePeriod:u,options:r}))}));case 5:case"end":return a.stop()}}),a)}))))}},o)}))):null}I.displayName="useGuildFeedFeatureItem"},262100:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.canReplyToMessage=c;t.useCanReplyToMessage=function(e,t){var n,a=(0,o.useCanUnarchiveThread)(e),l=(0,r.useStateFromStores)([u.default],(function(){return c(e,t,u.default)})),d=(p=(0,i.useCurrentUserCommunicationDisabled)(null!==(n=e.getGuildId())&&void 0!==n?n:void 0),E=2,function(e){if(Array.isArray(e))return e}(p)||function(e,t){
var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){u=!0;i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(p,E)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(p,E)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1],f=!e.isArchivedThread()||a;var p,E;return l&&!d&&f};var r=n(536211),i=n(514756),a=d(n(477072)),o=n(819235),u=d(n(689389)),l=n(478036);function d(e){return e&&e.__esModule?e:{default:e}}function s(e,t){
(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n){return(e.isPrivate()?!e.isSystemDM():n.can(l.Permissions.SEND_MESSAGES,e)&&n.can(l.Permissions.READ_MESSAGE_HISTORY,e))&&!(0,a.default)(t)}},43247:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.setSpeechRate=function(e){i.default.dispatch({type:a.ActionTypes.SET_TTS_SPEECH_RATE,speechRate:e})};t.speakMessage=function(e,t){i.default.dispatch({type:a.ActionTypes.SPEAK_MESSAGE,channel:e,message:t})};t.speakText=function(e,t,n,r,o){i.default.dispatch({type:a.ActionTypes.SPEAK_TEXT,text:e,interrupt:t,maxLength:n,onStart:r,onEnd:o})};t.speakingMessage=function(e,t){i.default.dispatch({type:a.ActionTypes.SPEAKING_MESSAGE,channelId:e,messageId:t})};t.stopSpeaking=function(){i.default.dispatch({type:a.ActionTypes.STOP_SPEAKING})};var r,i=(r=n(636602))&&r.__esModule?r:{default:r},a=n(770348)},91603:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0
;var r,i=u(n(536211)),a=u(n(636602)),o=n(770348);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function d(e,t){d=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return d(e,t)}function s(){s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return s.apply(this,arguments)}var c={speechRate:1,currentMessage:null},f=c;var p=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;d(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(e){f=s({},c,{},null!=e?e:null)};n.isSpeakingMessage=function(e,t){var n=f.currentMessage;return null!==n&&n.channelId===e&&n.messageId===t};n.getUserAgnosticState=function(){return f}
;n.__getLocalVars=function(){return{initialState:c,state:f}};!function(e,t,n){t&&l(e.prototype,t);n&&l(e,n);Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"currentMessage",get:function(){return f.currentMessage}},{key:"speechRate",get:function(){return f.speechRate}}]);return t}(i.default.DeviceSettingsStore);p.displayName="TTSStore";p.persistKey="TTSStore";p.migrations=[];var E=new p(a.default,__OVERLAY__?{}:((r={})[o.ActionTypes.SPEAKING_MESSAGE]=function(e){var t=e.messageId,n=e.channelId;f=s({},f,{currentMessage:{messageId:t,channelId:n}})},r[o.ActionTypes.STOP_SPEAKING]=function(){f=s({},f,{currentMessage:null})},r[o.ActionTypes.SET_TTS_SPEECH_RATE]=function(e){f=s({},f,{speechRate:e.speechRate})},r));t.default=E},281638:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=o;var r;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e)
;var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=e[o]}r.default=e;n&&n.set(e,r)}(n(667294));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function a(e,t,n,i){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&a)for(var d in a)void 0===t[d]&&(t[d]=a[d]);else t||(t=a||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function o(e){var t=e.width,n=void 0===t?24:t,r=e.height,i=void 0===r?24:r,o=e.color,u=void 0===o?"currentColor":o;return a("svg",{className:e.className,
width:n,height:i,viewBox:"0 0 24 24"},void 0,a("path",{d:"M10 8.26667V4L3 11.4667L10 18.9333V14.56C15 14.56 18.5 16.2667 21 20C20 14.6667 17 9.33333 10 8.26667Z",className:e.foreground,fill:u}))}o.displayName="Reply"},402193:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=c;var r,i,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}r.default=e;n&&n.set(e,r);return r}(n(667294)),o=(r=n(468205))&&r.__esModule?r:{default:r},u=["width","height","color","foreground"];function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function d(){
d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return d.apply(this,arguments)}function s(e,t,n,r){i||(i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&a)for(var d in a)void 0===t[d]&&(t[d]=a[d]);else t||(t=a||{});return{$$typeof:i,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(e){var t=e.width,n=void 0===t?24:t,r=e.height,i=void 0===r?24:r,l=e.color,c=void 0===l?"currentColor":l,f=e.foreground,p=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,u);return a.createElement("svg",d({},(0,o.default)(p),{width:n,height:i,viewBox:"0 0 24 24"}),s("path",{
className:f,fill:c,fillRule:"evenodd",clipRule:"evenodd",
d:"M2.99805 4.8C2.99805 3.8055 3.80445 3 4.79805 3H19.198C20.1925 3 20.998 3.8055 20.998 4.8V15.6C20.998 16.5936 20.1925 17.4 19.198 17.4H11.098L7.49805 21V17.4H4.79805C3.80445 17.4 2.99805 16.5936 2.99805 15.6V4.8ZM11.5737 5.16264C11.7336 5.00375 11.9739 4.95652 12.183 5.04208C12.3921 5.12708 12.5279 5.33098 12.5279 5.55487V14.444C12.5279 14.669 12.3921 14.8718 12.183 14.9579C11.9739 15.0435 11.7336 14.9963 11.5737 14.8374L9.1739 12.2217H7.4969C7.18945 12.2217 6.9379 11.9717 6.9379 11.6662V8.33273C6.9379 8.02772 7.18945 7.77716 7.4969 7.77716H9.1739L11.5737 5.16264ZM13.6459 7.22159V6.11044C15.8037 6.11044 17.5589 7.85549 17.5589 9.99944C17.5589 12.1445 15.8037 13.8884 13.6459 13.8884V12.7773C15.1871 12.7773 16.4409 11.5312 16.4409 9.99944C16.4409 8.46829 15.1871 7.22159 13.6459 7.22159ZM15.3229 9.99944C15.3229 9.08108 14.5705 8.33273 13.6459 8.33273V9.44387C13.9539 9.44387 14.2049 9.69332 14.2049 9.99944C14.2049 10.3056 13.9539 10.555 13.6459 10.555V11.6662C14.5705 11.6662 15.3229 10.9189 15.3229 9.99944Z"
}))}c.displayName="SpeakMessage"}}]);
//# sourceMappingURL=a85aff9ab5591abacf48.js.map