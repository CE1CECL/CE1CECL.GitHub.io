(this.webpackJsonp=this.webpackJsonp||[]).push([[8],{10152:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;p(n(0));var r,a=n(43),o=c(n(31)),i=p(n(508)),u=c(n(95)),l=n(1),s=c(n(7)),f=c(n(7870));function c(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;d=function(){return e};return e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;t&&t.set(e,n);return n}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0})
;if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var m=function(){return(0,a.transitionTo)(l.Routes.LOGIN)},h=function(e){var t=e.authBoxClassName,r=e.underageMessage,a=e.fromRegister;return v(i.default,{className:t},void 0,v("img",{alt:"",src:n(9176),className:f.default.img}),v(i.Title,{className:f.default.title},void 0,s.default.Messages.AGE_GATE_UNDERAGE_HEADER),v(i.SubTitle,{className:f.default.subtitle},void 0,a?s.default.Messages.AGE_GATE_UNDERAGE_BODY_POST_REGISTER_MESSAGE:s.default.Messages.AGE_GATE_UNDERAGE_BODY.format({underageMessage:r||s.default.Messages.AGE_GATE_UNDERAGE_BODY_DEFAULT_MESSAGE,helpURL:u.default.getArticleURL(l.HelpdeskArticles.AGE_GATE)})),v(o.default,{fullWidth:!0,onClick:m},void 0,s.default.Messages.AGE_GATE_UNDERAGE_BACK_TO_LOGIN))}
;h.displayName="AgeGateUnderage";var g=h;t.default=g},10153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.RegistrationSteps=t.RegistrationTransitionActionTypes=void 0;var r,a;t.RegistrationTransitionActionTypes=r;!function(e){e.VIEWED="viewed";e.SUBMITTED="submitted";e.RESEND_CODE="resend_code";e.RESEND_CODE_CALL="resend_code_call";e.INPUT_ERROR="input_error";e.RESPONSE_ERROR="response_error";e.SUCCESS="success"}(r||(t.RegistrationTransitionActionTypes=r={}));t.RegistrationSteps=a;!function(e){e.IDENTITY="identity";e.ACCOUNT_INFORMATION="account_information";e.FULL="full";e.AGE_GATE="age_gate";e.CAPTCHA="captcha";e.INVITE="invite";e.SMS_VERIFY="sms_verify"}(a||(t.RegistrationSteps=a={}))},10154:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.registerPhone=function(e){return h.apply(this,arguments)};t.registerDeferred=function(e){a.default.dispatch({type:f.ActionTypes.REGISTER_SAVE_FORM,form:e})};t.default=function(e){
var t=e.invite,n=void 0===t?null:t,r=e.giftCodeSKUId,a=void 0===r?null:r,o=e.captchaKey,i=void 0===o?null:o;return g(p({},function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(a[n]=e[n])}return a}(e,["invite","giftCodeSKUId","captchaKey"]),{invite:n,giftCodeSKUId:a,captchaKey:i}))};t.registerFull=g;var r=n(97),a=d(n(2)),o=d(n(1186)),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;t&&t.set(e,n);return n}(n(1241)),u=d(n(13)),l=d(n(517)),s=d(n(1297)),f=n(1);function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;c=function(){return e};return e}function d(e){
return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){v(o,r,a,i,u,"next",e)}function u(e){v(o,r,a,i,u,"throw",e)}i(void 0)}))}}function h(){return(h=m(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.phone;e.prev=1;e.next=4;return l.default.post({url:f.Endpoints.REGISTER_PHONE,body:{phone:n},trackedActionData:{event:r.NetworkActionNames.USER_REGISTER_PHONE}});case 4:return e.abrupt("return",e.sent);case 7:e.prev=7;e.t0=e.catch(1);i=new o.default(e.t0);a.default.dispatch({
type:f.ActionTypes.REGISTER_FAILURE,error:i});throw e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function g(e){var t=e.email,n=e.phoneToken,c=e.username,d=e.consent,p=e.password,v=e.guildTemplateCode,m=e.birthday,h=e.invite,g=void 0===h?null:h,_=e.giftCodeSKUId,E=void 0===_?null:_,y=e.captchaKey,N=void 0===y?null:y,O=e.multiStep,S=void 0!==O&&O,I=e.promotionalEmailOptIn,T=void 0===I?null:I;a.default.dispatch({type:f.ActionTypes.REGISTER,birthday:S?m:null});null!=m&&(0,s.default)(m,f.AnalyticsSections.REGISTER);return l.default.post({url:f.Endpoints.REGISTER,body:{fingerprint:u.default.getFingerprint(),email:t,username:c,password:p,invite:g,consent:d,phone_token:n,date_of_birth:null==m?void 0:m.format("YYYY-MM-DD"),gift_code_sku_id:E,guild_template_code:v,captcha_key:N,promotional_email_opt_in:T},trackedActionData:{event:r.NetworkActionNames.USER_REGISTER,metadata:{invite_code:g,promotional_email_opt_in:T}}}).then((function(e){a.default.dispatch({
type:f.ActionTypes.REGISTER_SUCCESS,token:e.body.token})}),(function(e){var t=new o.default(e);a.default.dispatch({type:f.ActionTypes.REGISTER_FAILURE,error:t});t.getFieldErrors("date_of_birth")&&i.preventUnderageRegistration();throw e}))}},10155:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=(0,i.usePromoEmailConsentStore)(),t=e.required,n=e.checked;return t?c(d,{checked:n}):null};var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;t&&t.set(e,n);return n}(n(0)),o=n(10156),i=n(1243),u=s(n(9128)),l=s(n(7));function s(e){return e&&e.__esModule?e:{default:e}}function f(){
if("function"!=typeof WeakMap)return null;var e=new WeakMap;f=function(){return e};return e}function c(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function d(e){var t=e.checked,n=o.PromotionalEmailOptInExperiment.useExperiment({})[0],r=n.enabled,s=n.showOptOutText;a.useEffect((function(){o.PromotionalEmailOptInExperiment.trackExposure({})}),[]);a.useEffect((function(){r&&(0,i.setPromoEmailConsentEnabled)(r)}),[r]);var f=l.default.Messages.PROMOTIONAL_EMAIL_OPT_IN_CONSENT;s&&(f=f+" "+l.default.Messages.PROMOTIONAL_EMAIL_OPT_IN_CONSENT_OPT_OUT_TEXT);return r?c(u.default,{value:t,subText:f,
onChange:i.setPromoEmailConsentChecked}):null}},10156:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PromotionalEmailOptInExperiment=void 0;var r=(0,n(59).createExperiment)({kind:"user",id:"2021-08_promotional_email_opt_in_experiment",label:"Promotional email opt in experiment",defaultConfig:{enabled:!1,showOptOutText:!1},treatments:[{id:1,label:"show promotional email opt in checkbox",config:{enabled:!0,showOptOutText:!1}},{id:2,label:"show promotional email opt in checkbox with opt out text",config:{enabled:!0,showOptOutText:!0}}]});t.PromotionalEmailOptInExperiment=r},5671:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0
;var r,a=j(n(0)),o=F(n(10)),i=n(417),u=n(3),l=F(n(388)),s=n(1076),f=F(n(6006)),c=F(n(1101)),d=F(n(5954)),p=F(n(5800)),v=F(n(5967)),m=F(n(5995)),h=n(5658),g=F(n(13)),_=F(n(1107)),E=F(n(5938)),y=F(n(58)),N=j(n(508)),O=F(n(497)),S=n(45),I=F(n(25)),T=F(n(15)),R=n(1112),C=n(124),b=n(315),A=F(n(5983)),M=F(n(5968)),P=j(n(5956)),w=F(n(6021)),L=F(n(5969)),D=n(1),k=F(n(7)),G=F(n(6099)),B=F(n(496));function F(e){return e&&e.__esModule?e:{default:e}}function U(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;U=function(){return e};return e}function j(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=U();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;t&&t.set(e,n);return n}function x(){
return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function H(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function V(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}function W(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){V(o,r,a,i,u,"next",e)}function u(e){V(o,r,a,i,u,"throw",e)}i(void 0)}))}}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n]
;r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}var z=H(N.AuthSpinner,{}),$=H(P.InviteResolvingHeader,{}),Z=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;Y(e,t)}(t,e);function t(t){var n;(n=e.call(this,t)||this).handleAuthToken=function(){var e=W(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return l.default.loginToken(t,!1);case 2:T.default.track(D.AnalyticEvents.LOGIN_SUCCESSFUL,{source:D.LoginSuccessfulSources.QR_CODE,login_source:n.loginSource,gift_code_sku_id:n.giftCodeSKUId,is_new_user:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n.setLoginRef=function(e){n.loginRef=e};n.setPasswordRef=function(e){n.passwordRef=e};n.setCodeRef=function(e){
n.codeRef=e};n.getFullLogin=function(){var e=n.state;return e.loginPrefix+e.login};n.renderError=function(e){var t=n.props.errors;if(n.hasError(e)){var r=t[e];return Array.isArray(r)?r[0]:r}return null};n.handleLogin=function(e){var t=n.state,r=t.password,a=t.captchaKey,o=t.undelete;null!=e&&e.preventDefault();n.setState({captchaCallback:n.handleLogin,captchaKey:null});l.default.login({login:n.getFullLogin(),password:r,undelete:o,captchaKey:a,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId,invite:n.props.invite});C.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE)};n.handleIPAuthorize=function(){var e=W(regeneratorRuntime.mark((function e(t){var r,a,o,i,u,s,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.state,a=r.password,o=r.captchaKey,i=r.undelete;n.setState({phoneVerifyError:null,captchaKey:null});u=n.getFullLogin();e.prev=3;e.next=6;return p.default.verifyPhone(u,t,!1);case 6:s=e.sent;f=s.token;e.next=10
;return l.default.authorizeIPAddress(f);case 10:l.default.login({login:u,password:a,undelete:i,captchaKey:o,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId});C.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE);e.next=17;break;case 14:e.prev=14;e.t0=e.catch(3);null!=e.t0.body&&null!=e.t0.body.message&&n.setState({phoneVerifyError:e.t0.body.message});case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}();n.handlePasswordReset=function(){var e=W(regeneratorRuntime.mark((function e(t){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.props.transitionTo;n.setState({phoneVerifyError:null});e.prev=2;e.next=5;return p.default.verifyPhone(n.getFullLogin(),t,!1);case 5:a=e.sent;o=a.token;r(D.Routes.RESET,{search:(0,i.stringify)({token:o,from_login:"true"})});e.next=13;break;case 10:e.prev=10;e.t0=e.catch(2);null!=e.t0.body&&null!=e.t0.body.message&&n.setState({
phoneVerifyError:e.t0.body.message});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();n.handleTokenSubmit=function(e){var t=n.state.code,r=n.props.mfaTicket;null!=e&&e.preventDefault();l.default.loginMFA({code:t.replace(/ /g,""),ticket:r,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId});C.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE)};n.handleSMSTokenSubmit=function(e){var t=n.state.smsCode,r=n.props.mfaTicket;null!=e&&e.preventDefault();l.default.loginSMS({code:t.replace(/ /g,""),ticket:r});C.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE)};n.handleToggleSMSLogin=function(e){var t=n.props.mfaTicket;null!=e&&e.preventDefault();l.default.requestSMSToken(t);C.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE)};n.handleForgotPassword=function(){var e=W(regeneratorRuntime.mark((function e(t){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:
null!=t&&t.preventDefault();null!=n.loginRef&&n.loginRef.focus();r=n.getFullLogin();o=n.state.captchaKey;n.setState({captchaCallback:n.handleForgotPassword,captchaKey:null});e.prev=5;C.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE);e.next=9;return l.default.forgotPassword(r,o);case 9:(0,S.openModal)((function(e){return a.createElement(O.default,x({header:k.default.Messages.EMAIL_VERIFICATION_INSTRUCTIONS_HEADER,confirmText:k.default.Messages.OKAY,confirmButtonColor:N.Button.Colors.BRAND,className:b.isMobile?G.default.mobile:""},e),H(I.default,{size:I.default.Sizes.SIZE_16},void 0,k.default.Messages.EMAIL_VERIFICATION_INSTRUCTIONS_BODY.format({email:r})))}));e.next=14;break;case 12:e.prev=12;e.t0=e.catch(5);case 14:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}();n.handleResendCode=function(){p.default.resendCode(n.getFullLogin())};n.handleReset=function(e){null!=e&&e.preventDefault();l.default.loginReset()
;n.setState({password:"",loginPrefix:"",login:"",code:"",smsCode:"",captchaKey:null,undelete:!1,checkingHandoff:!1})};n.handleCancelAccountDeletion=function(){n.setState({undelete:!0},n.handleLogin)};n.handleCaptchaVerify=function(e){var t=n.state.captchaCallback;n.setState({captchaKey:e},t)};n.handleGotoRegister=function(){var e=n.state.login,t=n.props,r=t.invite,a=t.giftCode,o=t.closeLogin,u=t.openRegister,s=t.guildTemplate,f=t.location,c=t.transitionTo,d=t.redirectTo;if(t.isGuest){void 0!==o&&o();void 0!==u&&u()}else{var p,v=null!=f?(0,i.parse)(f.search):{};""!==e&&(v.email=e);if(null!=r){v.mode="register";p=D.Routes.INVITE(r.code)}else if(null!=a){v.mode="register";p=D.Routes.GIFT_CODE(a.code)}else if(null!=s)p=D.Routes.GUILD_TEMPLATE(s.code);else if(null!=d){p=D.Routes.REGISTER;v.redirect_to=d}else p=D.Routes.REGISTER;l.default.loginReset();c(p,{search:(0,i.stringify)(v)});C.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE)}};var r=null!=t.location?(0,
i.parse)(t.location.search):{};n.state={redirecting:t.authenticated,checkingHandoff:t.handoffAvailable,loginPrefix:"",login:r.email||r.login||"",password:"",code:"",smsCode:"",captchaKey:null,captchaCallback:n.handleLogin,undelete:!1,phoneVerifyError:null};return n}t.getDerivedStateFromProps=function(e){var t=e.handoffAvailable,n=e.authenticated;return t||n?null:{checkingHandoff:!1}};var r=t.prototype;r.componentDidMount=function(){var e=this.props,t=e.handoffAvailable,n=e.authenticated,r=e.giftCodeSKU,a=e.invite,o=e.location;t&&!n?(0,s.handoffBegin)():n&&this.loginOrSSO(n,o,!0);T.default.track(D.AnalyticEvents.LOGIN_VIEWED,x({location:null!=a?"Invite Login Page":"Non-Invite Login Page",login_source:this.loginSource},null!=r?(0,c.default)(r,!1,!1):{}),{flush:!0});l.default.getLocationMetadata();(0,h.trackAppUIViewed)("login")};r.componentDidUpdate=function(e){var t=this.props,n=t.authenticated,r=t.location,a=this.state.checkingHandoff;!n||e.authenticated||a||this.loginOrSSO(n,r)
;if(e.errors!==this.props.errors)if(this.hasError("password")){var o;null===(o=this.passwordRef)||void 0===o||o.focus()}else if(this.hasError("email")||this.hasError("login")){var i;null===(i=this.loginRef)||void 0===i||i.focus()}else if(this.hasError("code")){var u;null===(u=this.codeRef)||void 0===u||u.focus()}};r.loginOrSSO=function(e,t,n){var r=this;void 0===n&&(n=!1);var a=this.props.isGuest;e&&(null!=t||a)&&(n?l.default.verifySSOToken().then((function(){return r.transitionSSO(t)})):this.transitionSSO(t))};r.transitionSSO=function(e){var t=this.props,r=t.transitionTo,a=t.redirectTo;if(t.isGuest&&null!=a)r(a);else{var o=null!=e?(0,i.parse)(e.search):{},u=(o.redirect_to,function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(a[n]=e[n])}return a}(o,["redirect_to"]));if(null!=a)a.startsWith(D.Routes.UPCOMING_STAGES(""))?n(43).transitionTo(a):r(a);else if(null==u.service)r(D.Routes.APP);else{
var l=window.location.protocol+window.GLOBAL_ENV.API_ENDPOINT+D.Endpoints.SSO,s=x({},u,{token:g.default.getToken()});window.location=l+"?"+(0,i.stringify)(s)}}};r.hasError=function(e){return null!=this.props.errors[e]};r.renderHandOffAvailable=function(){var e=this.props.authBoxClassName;return H(N.default,{className:e},void 0,z,H(N.Title,{className:B.default.marginBottom8},void 0,k.default.Messages.BROWSER_HANDOFF_DETECTING_TITLE),H(N.SubTitle,{},void 0,k.default.Messages.AUTH_BROWSER_HANDOFF_DETECTING_DESCRIPTION))};r.renderHandOffContinue=function(){var e=this.props,t=e.user,n=e.transitionTo,r=e.authBoxClassName;return null==t?null:H(N.default,{className:r},void 0,H(N.Avatar,{src:t.getAvatarURL(void 0),size:N.Avatar.Sizes.DEPRECATED_SIZE_100,className:B.default.marginBottom20}),H(N.Title,{className:B.default.marginBottom8},void 0,k.default.Messages.BROWSER_HANDOFF_SUCCESS_TITLE.format({name:t.toString()})),H(N.SubTitle,{className:B.default.marginBottom40
},void 0,k.default.Messages.BROWSER_HANDOFF_SUCCESS_BODY),H(N.Block,{},void 0,H(N.Button,{onClick:function(){return n(D.Routes.APP)},className:B.default.marginBottom8},void 0,k.default.Messages.BROWSER_HANDOFF_SUCCESS_ACTION.format({name:t.toString()})),H(N.Button,{look:N.Button.Looks.LINK,color:N.Button.Colors.LINK,onClick:this.handleReset},void 0,k.default.Messages.BROWSER_HANDOFF_SUCCESS_CANCEL)))};r.renderDisabledAccount=function(){var e=this.props.authBoxClassName,t=this.props.loginStatus===D.LoginStates.ACCOUNT_DISABLED,n=t?k.default.Messages.ACCOUNT_DISABLED_TITLE:k.default.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_TITLE,r=t?k.default.Messages.ACCOUNT_DISABLED_DESCRIPTION:k.default.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_DESCRIPTION;return H(N.default,{tag:"form",onSubmit:this.handleReset,className:e},void 0,H(N.Title,{className:B.default.marginBottom8},void 0,n),H(N.SubTitle,{className:B.default.marginBottom20},void 0,r),H(N.Block,{},void 0,H(N.Button,{
color:N.Button.Colors.BRAND,type:"submit"},void 0,k.default.Messages.RETURN_TO_LOGIN),H("div",{className:(0,o.default)(B.default.marginTop8,G.default.needAccount)},void 0,k.default.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_CANCEL.format({onClick:this.handleCancelAccountDeletion}))))};r.renderResolving=function(){var e=this,t=this.props,n=t.authBoxClassName,r=t.country;return H(N.default,{className:n},void 0,$,H(N.Block,{className:B.default.marginTop20},void 0,H(m.default,{className:B.default.marginBottom20,alpha2:r.alpha2,countryCode:r.code.split(" ")[0],label:k.default.Messages.FORM_LABEL_EMAIL_OR_PHONE_NUMBER,onChange:function(t,n){return e.setState({login:t,loginPrefix:n})},setRef:this.setLoginRef,autoComplete:"off",spellCheck:"false",value:this.state.login,autoFocus:!0}),H(N.Input,{className:B.default.marginBottom20,label:k.default.Messages.FORM_LABEL_PASSWORD,onChange:function(t){return e.setState({password:t})},type:"password",setRef:this.setPasswordRef,autoComplete:"off",
spellCheck:"false",value:this.state.password}),H(N.Button,{className:B.default.marginBottom8,type:"submit",disabled:!0},void 0,k.default.Messages.LOGIN),H(N.Button,{disabled:!0,look:N.Button.Looks.LINK,color:N.Button.Colors.LINK},void 0,k.default.Messages.FORGOT_PASSWORD),H(N.Button,{disabled:!0,className:B.default.marginTop4,look:N.Button.Looks.LINK,color:N.Button.Colors.LINK},void 0,k.default.Messages.NEED_ACCOUNT)))};r.renderDefaultForm=function(e){var t,n,r=this,i=this.props,u=i.invite,l=i.giftCode,s=i.loginStatus,f=i.isGuest,c=i.country,d=!this.hasError("email")&&this.hasError("password"),p=null!=(null==u?void 0:u.stage_instance);n=null==u||p?null!=l?H(M.default,{giftCode:l}):f?null:H(a.Fragment,{},void 0,H(N.Title,{className:B.default.marginBottom8},"title",k.default.Messages.LOGIN_TITLE),H(N.SubTitle,{},"subtitle",k.default.Messages.AUTH_LOGIN_BODY)):H(P.default,{invite:u});return H(y.default,{direction:y.default.Direction.HORIZONTAL,align:y.default.Align.CENTER
},void 0,H("div",{className:G.default.mainLoginContainer},void 0,n,H(N.Block,{className:B.default.marginTop20},void 0,H(m.default,{alpha2:c.alpha2,countryCode:c.code.split(" ")[0],className:B.default.marginBottom20,label:k.default.Messages.FORM_LABEL_EMAIL_OR_PHONE_NUMBER,error:null!==(t=this.renderError("login"))&&void 0!==t?t:this.renderError("email"),onChange:function(e,t){return r.setState({login:e,loginPrefix:t})},setRef:this.setLoginRef,autoComplete:"off",spellCheck:"false",value:this.state.login,autoFocus:!d}),H(N.Input,{label:k.default.Messages.FORM_LABEL_PASSWORD,error:this.renderError("password"),onChange:function(e){return r.setState({password:e})},name:"password",type:"password",setRef:this.setPasswordRef,autoComplete:"off",spellCheck:"false",autoFocus:d,value:this.state.password}),H(N.Button,{onClick:this.handleForgotPassword,look:N.Button.Looks.LINK,color:N.Button.Colors.LINK,className:(0,o.default)(B.default.marginBottom20,B.default.marginTop4)
},void 0,k.default.Messages.FORGOT_PASSWORD),H(N.Button,{type:"submit",submitting:s===D.LoginStates.LOGGING_IN,color:p?N.Button.Colors.GREEN:N.Button.Colors.BRAND,className:B.default.marginBottom8},void 0,p?k.default.Messages.LOGIN_STAGE:k.default.Messages.LOGIN),H("div",{className:B.default.marginTop4},void 0,H("span",{className:G.default.needAccount},void 0,k.default.Messages.NEED_ACCOUNT),H(N.Button,{onClick:this.handleGotoRegister,look:N.Button.Looks.LINK,color:N.Button.Colors.LINK,className:G.default.smallRegisterLink},void 0,k.default.Messages.REGISTER)))),e?H(w.default,{authTokenCallback:this.handleAuthToken}):null)};r.renderDefault=function(){var e=this.props,t=e.authBoxClassName,n=e.isGuest;return H("div",{className:G.default.pageContainer},void 0,H(N.default,{onSubmit:this.handleLogin,tag:"form",className:t,expanded:!0},void 0,this.renderDefaultForm(!n)))};r.renderGuildTemplate=function(e){var t=this,n=H(d.default,{guildTemplate:e});return H(L.default,{
onSubmit:this.handleLogin,tag:"form",className:(0,o.default)(this.props.authBoxClassName,G.default.horizontalAuthBox)},void 0,(function(){return[n,t.renderDefaultForm(!1)]}))};r.renderMFA=function(){var e=this,t=this.props,r=t.loginStatus,a=t.mfaSMS,o=t.authBoxClassName;return H(N.default,{onSubmit:this.handleTokenSubmit,tag:"form",className:o},void 0,H("img",{alt:"",src:n(5674),className:B.default.marginBottom20}),H(N.Title,{className:B.default.marginBottom8},void 0,k.default.Messages.TWO_FA),H(N.SubTitle,{},void 0,k.default.Messages.TWO_FA_ENTER_TOKEN_BODY),H(N.Block,{className:B.default.marginTop40},void 0,H(N.Input,{className:B.default.marginBottom20,error:this.renderError("code"),setRef:this.setCodeRef,onChange:function(t){return e.setState({code:t})},autoComplete:"off",placeholder:k.default.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,label:k.default.Messages.TWO_FA_ENTER_TOKEN_LABEL,value:this.state.code},"totpCode"),H(N.Button,{type:"submit",
submitting:r===D.LoginStates.LOGGING_IN_MFA},void 0,k.default.Messages.LOGIN),a?H(N.Button,{onClick:this.handleToggleSMSLogin,submitting:r===D.LoginStates.LOGGING_IN_MFA_SMS,className:B.default.marginTop8,look:N.Button.Looks.LINK,color:N.Button.Colors.LINK},void 0,k.default.Messages.MFA_SMS_RECEIVE_CODE):null,H(N.Button,{look:N.Button.Looks.LINK,color:N.Button.Colors.LINK,className:B.default.marginTop4,onClick:this.handleReset},void 0,k.default.Messages.TWO_FA_LOGIN_FOOTER)))};r.renderMFASMS=function(){var e=this,t=this.props,r=t.loginStatus,a=t.maskedPhone,o=t.authBoxClassName,i=r===D.LoginStates.LOGGING_IN_MFA_SMS||""===a;return H(N.default,{onSubmit:this.handleSMSTokenSubmit,tag:"form",className:o},void 0,H("img",{alt:"",src:n(5674),className:B.default.marginBottom20}),H(N.Title,{className:B.default.marginBottom8},void 0,k.default.Messages.TWO_FA),H(N.SubTitle,{className:B.default.marginBottom8
},void 0,i?k.default.Messages.TWO_FA_ENTER_SMS_TOKEN_SENDING:k.default.Messages.TWO_FA_ENTER_SMS_TOKEN_SENT.format({phoneNumber:a})),H(N.Block,{className:B.default.marginTop40},void 0,H(N.Input,{className:B.default.marginBottom20,error:this.renderError("code"),setRef:this.setCodeRef,onChange:function(t){return e.setState({smsCode:t})},autoComplete:"off",placeholder:k.default.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,label:k.default.Messages.TWO_FA_ENTER_SMS_TOKEN_LABEL,value:this.state.smsCode},"smsCode"),H(N.Button,{type:"submit",submitting:i,color:i?N.Button.Colors.TRANSPARENT:N.Button.Colors.BRAND},void 0,k.default.Messages.LOGIN),i?null:H(N.Button,{onClick:this.handleToggleSMSLogin,className:B.default.marginTop8,look:N.Button.Looks.LINK,color:N.Button.Colors.LINK},void 0,k.default.Messages.MFA_SMS_RESEND),H(N.Button,{look:N.Button.Looks.LINK,color:N.Button.Colors.LINK,className:B.default.marginTop4,onClick:this.handleReset
},void 0,k.default.Messages.TWO_FA_LOGIN_FOOTER)))};r.renderIPAuthorization=function(){var e=this.props.authBoxClassName,t=this.state.phoneVerifyError;return H(N.default,{tag:"form",className:e},void 0,H(f.default,{title:k.default.Messages.PHONE_IP_AUTHORIZATION_TITLE,subtitle:k.default.Messages.PHONE_IP_AUTHORIZATION_SUBTITLE_RESEND.format({onResendClick:this.handleResendCode}),error:t,onSubmit:this.handleIPAuthorize,onCancel:l.default.loginReset}))};r.renderPasswordRecovery=function(){var e=this.props.authBoxClassName,t=this.state.phoneVerifyError;return H(N.default,{tag:"form",className:e},void 0,H(f.default,{title:k.default.Messages.PASSWORD_RECOVERY_VERIFY_PHONE_TITLE,subtitle:k.default.Messages.PASSWORD_RECOVERY_VERIFY_PHONE_SUBTITLE_RESEND.format({onResendClick:this.handleResendCode}),error:t,onSubmit:this.handlePasswordReset,onCancel:l.default.loginReset}))};r.render=function(){
var e=this.props,t=e.authenticated,n=e.invite,r=e.guildTemplate,a=e.loginStatus,o=e.handoffAvailable,i=e.isGuest,u=e.authBoxClassName,l=e.errors,s=l.captcha_sitekey,f=l.captcha_service,c=this.state,d=c.checkingHandoff;if(c.redirecting)return null;if(this.hasError("captcha_key"))return H(A.default,{authBoxClassName:u,onVerify:this.handleCaptchaVerify,title:i?null:k.default.Messages.LOGIN_TITLE,sitekey:s,captchaService:(0,R.parseCaptchaType)(f)});if(o)return this.renderHandOffAvailable();if(t&&d)return this.renderHandOffContinue();switch(a){case D.LoginStates.LOGGING_IN_MFA_SMS:case D.LoginStates.MFA_SMS_STEP:return this.renderMFASMS();case D.LoginStates.LOGGING_IN_MFA:case D.LoginStates.MFA_STEP:return this.renderMFA();case D.LoginStates.ACCOUNT_SCHEDULED_FOR_DELETION:case D.LoginStates.ACCOUNT_DISABLED:return this.renderDisabledAccount();case D.LoginStates.PHONE_IP_AUTHORIZATION:return this.renderIPAuthorization();case D.LoginStates.PASSWORD_RECOVERY_PHONE_VERIFICATION:
return this.renderPasswordRecovery();case D.LoginStates.LOGGING_IN:case D.LoginStates.NONE:default:return null!=n&&n.state===D.InviteStates.RESOLVING?this.renderResolving():null!=r?r.state===D.InviteStates.RESOLVING?this.renderResolving():this.renderGuildTemplate(r):this.renderDefault()}};!function(e,t,n){t&&K(e.prototype,t);n&&K(e,n)}(t,[{key:"loginSource",get:function(){var e=this.props,t=e.giftCode,n=e.guildTemplate,r=e.invite,a=e.isGuest;if(null!=t)return"gift";if(null!=n)return"guild_template";if(null!=r){if(null!=r.guild)return"guild_invite";if(null!=r.channel)return"dm_invite";if(null!=r.inviter)return"friend_invite"}else if(a)return"guest_lurker";return null}},{key:"giftCodeSKUId",get:function(){var e=this.props.giftCode;return null!=e?e.skuId:null}}]);return t}(a.PureComponent);Z.displayName="Login";Z.defaultProps={isGuest:!1,transitionTo:function(t){return e.location.assign(t)}};function q(e){var t=(0,
u.useStateFromStoresObject)([_.default,E.default,g.default,v.default],(function(){return{authenticated:g.default.isAuthenticated(),handoffAvailable:_.default.isHandoffAvailable(),user:_.default.user,loginStatus:g.default.getLoginStatus(),mfaTicket:g.default.getMFATicket(),mfaSMS:g.default.getMFASMS(),maskedPhone:g.default.getMaskedPhone(),errors:g.default.getErrors(),defaultRoute:E.default.defaultRoute,country:v.default.getCountryCode()}}));return a.createElement(Z,x({},e,t))}q.displayName="ConnectedLogin";var Q=q;t.default=Q}).call(this,n(42))},5674:function(e,t,n){e.exports=n.p+"0f4d1ff76624bb45a3fee4189279ee92.svg"},5956:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=t.InviteResolvingHeader=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=y();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor
;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;t&&t.set(e,n);return n}(n(0)),o=n(516),i=E(n(401)),u=E(n(35)),l=E(n(168)),s=E(n(89)),f=E(n(511)),c=E(n(397)),d=E(n(142)),p=n(508),v=E(n(257)),m=E(n(25)),h=n(1),g=E(n(7)),_=E(n(6065));function E(e){return e&&e.__esModule?e:{default:e}}function y(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;y=function(){return e};return e}function N(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var O=function(){
return N(a.Fragment,{},void 0,N(p.Avatar,{src:null,size:p.Avatar.Sizes.DEPRECATED_SIZE_100,className:_.default.avatar}),N(p.SubTitle,{},void 0,g.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN),N(p.Title,{className:_.default.inviteResolvingGuildName},void 0,g.default.Messages.LOADING))};t.InviteResolvingHeader=O;O.displayName="InviteResolvingHeader";var S=function(e){var t=e.guild,n=e.user,r=e.application,a=e.compact;return r?N(f.default,{className:_.default.appIcon,game:r,size:_.default.appIconSize}):n?N(p.Avatar,{src:null!=n?n.getAvatarURL(void 0):null,size:p.Avatar.Sizes.SIZE_80,className:a?_.default.compactAvatar:_.default.avatar}):t?N(v.default,{mask:v.default.Masks.SQUIRCLE,width:64,height:64,className:_.default.guildIcon},void 0,N(p.GuildIcon,{guild:t,size:p.GuildIcon.Sizes.LARGER,animate:!0})):null},I=function(e){var t=e.invite,n=e.disableUser,r=void 0!==n&&n,f=e.error,v=e.flatActivityCount,E=void 0!==v&&v,y=e.isRegister,O=void 0!==y&&y;if(null==t)return null
;var I,T,R,C=null!=t.guild?new l.default(t.guild):null,b=null!=t.channel?new u.default(t.channel):null,A=null!=t.target_application?new i.default(t.target_application):null,M=r||null==t.inviter?null:new s.default(t.inviter),P=!(null!=t.approximate_member_count&&t.approximate_member_count>100||null!=C&&C.hasFeature(h.GuildFeatures.COMMUNITY))&&M,w=null,L=!1;if(null!=C){w=null==M?g.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN:g.default.Messages.AUTH_MESSAGE_INVITED_BY.format({username:M.username});t.target_type===o.InviteTargetTypes.STREAM&&null!=t.target_user&&(w=g.default.Messages.AUTH_MESSAGE_INVITED_TO_STREAM.format({username:t.target_user.username}));t.target_type===o.InviteTargetTypes.EMBEDDED_APPLICATION&&null!=t.target_application&&(w=null!=M?g.default.Messages.AUTH_MESSAGE_INVITED_TO_PLAY_USERNAME.format({username:M.username}):g.default.Messages.AUTH_MESSAGE_INVITED_TO_PLAY);P&&null==A&&(I=N(p.GuildIcon,{guild:C,size:p.GuildIcon.Sizes.SMALL}));T=C.name
;if(null!=A){T=A.name;R=N("div",{},void 0,N(p.SubTitle,{className:_.default.appIn},void 0,g.default.Messages.EMBEDDED_ACTIVITIES_INVITE_IN),N("div",{className:_.default.guildContainer},void 0,N(p.GuildIcon,{guild:C,size:p.GuildIcon.Sizes.SMALL}),N(m.default,{className:_.default.appGuildName,color:m.default.Colors.CUSTOM,tag:"span",size:m.default.Sizes.SIZE_24},void 0,C.name)))}}else if(null!=b){if(null==M)throw new Error("no inviter in group DM invite");var D=M.username;if(b.name){w=g.default.Messages.AUTH_MESSAGE_INVITED_BY.format({username:D});T=b.name;null!=b.icon&&(I=N(p.ChannelIcon,{channel:b,size:p.Avatar.Sizes.SIZE_32}))}else{w=g.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN_GROUP_DM;T=D}}else if(null!=M){T=g.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_CHAT.format({username:M.username});L=!0;R=f?null:N(p.SubTitle,{className:_.default.directInviteSubTitle},void 0,O?g.default.Messages.INSTANT_INVITE_DIRECT_FRIEND_DESCRIPTION_REGISTER.format({
username:M.username+"#"+M.discriminator}):g.default.Messages.INSTANT_INVITE_DIRECT_FRIEND_DESCRIPTION.format({username:M.username+"#"+M.discriminator}))}return N("div",{className:_.default.container},void 0,N(S,{application:A,guild:C,user:P?M:null,compact:L}),f?a.createElement(a.Fragment,null,N(p.SubTitle,{},void 0,g.default.Messages.INVITE_MODAL_ERROR_TITLE),N(p.Title,{},void 0,f)):a.createElement(a.Fragment,null,N(p.SubTitle,{},void 0,w),N(p.Title,{className:_.default.title},void 0,null!=C?N(c.default,{guild:C,className:_.default.guildBadge,tooltipPosition:d.default.Positions.LEFT}):null,I,T)),R,null!=A||L?null:N(p.ActivityCount,{className:_.default.activityCount,online:t.approximate_presence_count,total:t.approximate_member_count,flat:E}))};I.displayName="InviteHeader";var T=I;t.default=T},5967:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,a=u(n(3)),o=u(n(2)),i=n(5814);n(1);function u(e){return e&&e.__esModule?e:{default:e}}
function l(e,t){return(l=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}var s=(0,i.getDefaultCountryCode)();function f(e){var t,n=e.countryCode;null!=n&&(s=null!==(t=(0,i.getCountryCodeByAlpha2)(n))&&void 0!==t?t:(0,i.getDefaultCountryCode)())}var c=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;l(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(e){null!=e&&(r=e.selectedCountryCode)};n.getState=function(){return{selectedCountryCode:r}};n.getCountryCode=function(){return null!=r?r:s};return t}(a.default.PersistedStore);c.persistKey="PhoneStore";var d=new c(o.default,{PHONE_SET_COUNTRY_CODE:function(e){var t=e.countryCode;r=t},CONNECTION_OPEN:f,SET_LOCATION_METADATA:f});t.default=d},5968:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=t.GiftCodeResolvingHeader=void 0;var r,a=function(e){if(e&&e.__esModule)return e
;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=E();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;t&&t.set(e,n);return n}(n(0)),o=_(n(10)),i=_(n(3)),u=_(n(73)),l=_(n(14)),s=_(n(267)),f=_(n(395)),c=_(n(511)),d=n(508),p=n(1),v=_(n(7)),m=_(n(6064)),h=_(n(1094)),g=_(n(496));function _(e){return e&&e.__esModule?e:{default:e}}function E(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;E=function(){return e};return e}function y(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}
if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var N=function(){return y(a.Fragment,{},void 0,y(d.Avatar,{src:null,size:d.Avatar.Sizes.DEPRECATED_SIZE_100,className:g.default.marginBottom20}),y(d.SubTitle,{},void 0,v.default.Messages.GIFT_CODE_AUTH_GIFTED),y(d.Title,{className:(0,o.default)(g.default.marginTop8,h.default.flexCenter)},void 0,v.default.Messages.LOADING))};t.GiftCodeResolvingHeader=N;N.displayName="GiftCodeResolvingHeader";var O=function(e){var t=e.error,n=e.gifter,r=e.sku,i=e.application,u=e.subscriptionPlan,l=null==n?v.default.Messages.GIFT_CODE_AUTH_GIFTED:v.default.Messages.GIFT_CODE_AUTH_GIFTED_BY.format({username:n.username}),s=r.name;null!=u&&(s=(u.interval===p.SubscriptionIntervalTypes.MONTH?v.default.Messages.GIFT_CODE_AUTH_GIFTED_SUBSCRIPTION_MONTHLY:v.default.Messages.GIFT_CODE_AUTH_GIFTED_SUBSCRIPTION_YEARLY).format({skuName:r.name,intervalCount:u.intervalCount
}));return y(a.Fragment,{},void 0,y(d.Avatar,{src:null!=n?n.getAvatarURL(void 0):null,size:d.Avatar.Sizes.DEPRECATED_SIZE_100,className:g.default.marginBottom20}),null!=t?y(a.Fragment,{},void 0,y(d.SubTitle,{},void 0,v.default.Messages.INVITE_MODAL_ERROR_TITLE),y(d.Title,{},void 0,t)):y(a.Fragment,{},void 0,y(d.SubTitle,{},void 0,l),y(d.Title,{className:(0,o.default)(g.default.marginTop8,h.default.flexCenter)},void 0,y(c.default,{size:c.default.Sizes.MEDIUM,className:m.default.applicationIcon,game:i,skuId:r.id}),s)))};O.displayName="GiftCodeHeader";var S=i.default.connectStores([f.default,u.default,s.default,l.default],(function(e){var t=e.giftCode,n=f.default.get(t.skuId),r=t.subscriptionPlanId;return{sku:n,subscriptionPlan:null!=r?s.default.getOrFetch(r):null,application:u.default.getGame(n.applicationId),gifter:l.default.getUser(t.userId)}}))(O);t.default=S},5969:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=d;var r,a=function(e){
if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;t&&t.set(e,n);return n}(n(0)),o=l(n(10)),i=l(n(508)),u=l(n(6098));function l(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;s=function(){return e};return e}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0})
;if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function d(e){var t=e.children,n=e.className,r=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(a[n]=e[n])}return a}(e,["children","className"]),l=t();return a.createElement(i.default,f({},r,{className:(0,o.default)(n,u.default.container),contentClassName:u.default.content}),l.map((function(e,t){return c("div",{className:u.default.column,style:{flexBasis:100/l.length+"%"}},t,e)})))}d.displayName="MultiColumnAuthBox"},5983:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;p(n(0));var r,a=n(91),o=c(n(1111)),i=p(n(508)),u=n(1),l=c(n(7)),s=c(n(1094)),f=c(n(496));function c(e){return e&&e.__esModule?e:{default:e}}function d(){
if("function"!=typeof WeakMap)return null;var e=new WeakMap;d=function(){return e};return e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;t&&t.set(e,n);return n}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var m=function(e){
var t=e.title,r=e.onVerify,c=e.authBoxClassName,d=e.captchaService,p=void 0===d?u.CaptchaTypes.RECAPTCHA:d,m=e.sitekey;return v(i.default,{className:c},void 0,v("img",{alt:"",src:n(5674),className:f.default.marginBottom20}),null!=t?v(i.Title,{className:f.default.marginBottom8},void 0,t):null,v(i.SubTitle,{className:f.default.marginBottom40},void 0,l.default.Messages.BEEP_BOOP),v("div",{className:s.default.flexCenter},void 0,v(o.default,{onVerify:r,theme:a.ThemeTypes.DARK,captchaService:p,sitekey:m})))};m.displayName="AuthCaptcha";var h=m;t.default=h},5995:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=m;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null
;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;t&&t.set(e,n);return n}(n(0)),o=d(n(10)),i=d(n(204)),u=n(135),l=n(5996),s=d(n(6018)),f=d(n(6063)),c=d(n(430));function d(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;p=function(){return e};return e}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function m(e){
var t,n=e.alpha2,r=e.countryCode,d=e.forceMode,p=e.label,m=e.error,h=e.className,g=e.required,_=e.value,E=e.setRef,y=e.placeholder,N=e.autoFocus,O=e.maxLength,S=e.spellCheck,I=e.autoComplete,T=e.onChange,R=e.inputClassName,C=a.useState(!1),b=C[0],A=C[1],M=(0,l.shouldShowCountryCodeSelector)(d,_);return v(u.FormItem,{title:p,error:m,className:h,required:g},void 0,v("div",{className:(0,o.default)(c.default.input,f.default.input,R,(t={},t[c.default.error]=null!=m,t[c.default.focused]=b,t))},void 0,v(s.default,{show:M,alpha2:n,countryCode:r}),v(i.default,{name:"email",type:d===l.PhoneOrEmailSelectorForceMode.EMAIL?"email":"text",value:_,inputRef:E,placeholder:y,"aria-label":p,onChange:function(e){var t=(0,l.shouldShowCountryCodeSelector)(d,e)?r:"";T(e,t)},autoComplete:I,autoFocus:N,maxLength:O,spellCheck:S,className:f.default.inputWrapper,inputClassName:f.default.inputField,onFocus:function(){return A(!0)},onBlur:function(){return A(!1)}})))}m.displayName="PhoneOrEmailInput"},
5996:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.shouldShowCountryCodeSelector=function(e,t){if(e===r.PHONE)return!(n=t,n.startsWith("+"));var n;if(e===r.EMAIL)return!1;if(t.length<3)return!1;return a.test(t)};t.getPhoneOrEmail=function(e){return/^\+\d/.test(e)?r.PHONE:r.EMAIL};t.PhoneOrEmailSelectorForceMode=void 0;var r;t.PhoneOrEmailSelectorForceMode=r;!function(e){e.PHONE="phone";e.EMAIL="email"}(r||(t.PhoneOrEmailSelectorForceMode=r={}));var a=/^[-() \d]+$/},6006:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=m;!function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e
;t&&t.set(e,n)}(n(0));var r,a=d(n(31)),o=d(n(5972)),i=d(n(58)),u=n(508),l=d(n(25)),s=d(n(7)),f=d(n(6055)),c=d(n(496));function d(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;p=function(){return e};return e}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function m(e){var t=e.title,n=e.subtitle,r=e.error,d=e.onSubmit,p=e.onCancel;return v(i.default,{direction:i.default.Direction.VERTICAL},void 0,v(u.Title,{className:c.default.marginBottom8},void 0,t),v(u.SubTitle,{className:f.default.subTitle},void 0,n),v("div",{},void 0,v(o.default,{
inputClassName:f.default.codeInput,onSubmit:d}),null!=r?v(l.default,{className:f.default.error},void 0,r):null),v(a.default,{className:f.default.button,onClick:p,color:a.default.Colors.GREY},void 0,s.default.Messages.CANCEL))}m.displayName="PhoneVerify"},6018:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=E;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;t&&t.set(e,n);return n}(n(0)),o=m(n(10)),i=n(125),u=n(3),l=m(n(5668)),s=m(n(107)),f=m(n(52)),c=m(n(295)),d=m(n(5800)),p=m(n(5981)),v=m(n(6062));function m(e){return e&&e.__esModule?e:{default:e}}function h(){
if("function"!=typeof WeakMap)return null;var e=new WeakMap;h=function(){return e};return e}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function E(e){var t=e.show,n=e.alpha2,r=e.countryCode,m=(0,u.useStateFromStores)([s.default],(function(){return s.default.useReducedMotion})),h=a.useRef(null),E=a.useState(0),y=E[0],N=E[1],O=a.useState(!1),S=O[0],I=O[1];a.useEffect((function(){function e(){var e,n
;N(t&&null!==(e=null===(n=h.current)||void 0===n?void 0:n.getBoundingClientRect().width)&&void 0!==e?e:0)}e();window.addEventListener("resize",e);return function(){return window.removeEventListener("resize",e)}}),[t,n,r]);var T=(0,i.useSpring)({width:y+"px",immediate:m,onStart:function(){I(!0)},onRest:function(){I(!1)}});return _(c.default,{position:c.default.Positions.TOP,renderPopout:function(e){return _(p.default,{className:v.default.popout,onClick:function(t){return function(e,t){d.default.setCountryCode(l.default[e]);t()}(t,e.closePopout)}})}},void 0,(function(e){var u;return _("div",{className:(0,o.default)(v.default.outerContainer,(u={},u[v.default.hidden]=!(t||S),u))},void 0,_(i.animated.div,{className:v.default.container,style:T},void 0,a.createElement("div",{className:v.default.innerContainer,ref:h},a.createElement(f.default,g({},e,{className:v.default.countryCode}),n," ",r),_("div",{className:v.default.separator}))))}))}E.displayName="CountrySelector"},6021:function(e,t,n){
"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=function(e){var t=i.useState(0),n=t[0],r=t[1],o=i.useState(!1),l=o[0],s=o[1],f=i.useState({step:a.INITIALIZING}),d=f[0],p=f[1],v=(0,c.default)(),m=i.useMemo((function(){return new u.default(1500,3e4)}),[]),h=i.useRef();h.current=i.useCallback((function(){p({step:a.INITIALIZING});if(v)r((function(e){return e+1}));else{M.info("document is not visible, will defer reconnection when document becomes visible.");s(!0)}}),[p,r,v,s]);var g=i.useCallback((function(){!function(e){var t=e.current;if(void 0===t)throw new Error("tried to unwrap an undefined value.");return t}(h)()}),[h]);i.useEffect((function(){if(v&&l&&d.step===a.INITIALIZING){M.info("reconnecting, now that document is visible");s(!1);r((function(e){return e+1}))}}),[d,v,l,s]);i.useEffect((function(){var t=Date.now(),n="wss:"+window.GLOBAL_ENV.REMOTE_AUTH_ENDPOINT+"/?v=1",r=new WebSocket(n);M.info("[0ms] connecting to "+n);var o=function(e){
return M.info("["+(Date.now()-t)+"ms] "+e)},i=null,u=null,l=null,s=null,f=!0;function c(){if(null!=i)return i;throw new Error("No key pair set")}var d=function(){p({step:a.INITIALIZING});m.pending||m.fail(g)},v=function(){if(f){f=!1;r.send(JSON.stringify({op:"heartbeat"}))}else{o("heartbeat timeout, reconnecting.");r.close();d()}};r.onmessage=function(){var t=b(regeneratorRuntime.mark((function t(n){var i,u,d,h,N,O,S,I,T,R;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=n.data;u=JSON.parse(i);t.t0=u.op;t.next="nonce_proof"===t.t0?5:"pending_remote_init"===t.t0?12:"pending_finish"===t.t0?22:"finish"===t.t0?30:"cancel"===t.t0?39:"hello"===t.t0?42:"heartbeat_ack"===t.t0?46:47;break;case 5:d=u.encrypted_nonce;t.next=8;return(0,E.computeNonceProof)(c(),d);case 8:h=t.sent;o("computed nonce proof");r.send(JSON.stringify({op:"nonce_proof",proof:h}));return t.abrupt("return");case 12:m.succeed();_.ComponentDispatch.dispatch(y.ComponentActions.WAVE_EMPHASIZE)
;t.next=16;return(0,E.publicKeyFingerprint)(c());case 16:if((N=t.sent)===u.fingerprint){t.next=19;break}throw new Error("bad fingerprint "+N+" !== "+u.fingerprint);case 19:o("handshake complete awaiting remote auth.");p({step:a.PENDING_REMOTE_INIT,fingerprint:N});return t.abrupt("return");case 22:_.ComponentDispatch.dispatch(y.ComponentActions.WAVE_EMPHASIZE);o("remote auth handshake started, awaiting finish/cancel.");O=u.encrypted_user_payload;t.next=27;return(0,E.decodeEncodedUserRecord)(c(),O);case 27:S=t.sent;p({step:a.PENDING_FINISH,user:S});return t.abrupt("return");case 30:_.ComponentDispatch.dispatch(y.ComponentActions.WAVE_EMPHASIZE);o("remote auth handshake finished.");I=u.encrypted_token;p({step:a.FINISH});t.next=36;return(0,E.decryptEncodedCiphertext)(c(),I);case 36:T=t.sent;e(T);return t.abrupt("return");case 39:o("remote auth handshake cancelled.");g();return t.abrupt("return");case 42:o("got hello, auth timeout="+u.timeout_ms+"ms");R=u.heartbeat_interval
;s=setTimeout((function(){s=null;v();l=setInterval(v,R)}),Math.floor(R*Math.random()));return t.abrupt("return");case 46:f=!0;case 47:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();r.onopen=b(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return(0,E.generateRsaKeyPair)();case 2:i=e.sent;e.next=5;return(0,E.serializePublicKey)(i);case 5:u=e.sent;e.next=8;return(0,E.publicKeyFingerprint)(i);case 8:t=e.sent;o("connected, handshaking with fingerprint: "+t);r.send(JSON.stringify({op:"init",encoded_public_key:u}));case 11:case"end":return e.stop()}}),e)})));r.onclose=function(e){o("disconnected, code: "+e.code+" "+e.reason);d()};r.onerror=function(e){o("disconnected, error: "+e);d()};return function(){o("cleaning up");r.onopen=function(){return null};r.onmessage=function(){return null};r.onclose=function(){return null};r.onerror=function(){return null};r.close(1e3)
;m.cancel();null!=s&&clearTimeout(s);null!=l&&clearInterval(l)}}),[g,e,m,n]);return{state:d,cancel:g}}(e.authTokenCallback),n=t.state,r=t.cancel,l=function(e){switch(e){case a.INITIALIZING:case a.PENDING_REMOTE_INIT:return o.QR_CODE;case a.PENDING_FINISH:case a.FINISH:return o.CONFIRM}}(n.step);return i.createElement(i.Fragment,null,R("div",{className:O.default.verticalSeparator}),R(p.default,{fillParent:!0,className:O.default.qrLogin,step:l,steps:[o.QR_CODE,o.CONFIRM]},void 0,R("div",{className:O.default.qrLoginInner},void 0,R(w,{state:n,cancel:r}))))};var r,a,o,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=T();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;t&&t.set(e,n);return n
}(n(0)),u=I(n(144)),l=n(91),s=I(n(1114)),f=I(n(5948)),c=I(n(6034)),d=I(n(28)),p=I(n(5643)),v=I(n(31)),m=I(n(157)),h=n(508),g=I(n(296)),_=n(124),E=n(6035),y=n(1),N=I(n(7)),O=I(n(6097)),S=I(n(496));function I(e){return e&&e.__esModule?e:{default:e}}function T(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;T=function(){return e};return e}function R(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function C(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){
var o=e.apply(t,n);function i(e){C(o,r,a,i,u,"next",e)}function u(e){C(o,r,a,i,u,"throw",e)}i(void 0)}))}}!function(e){e[e.INITIALIZING=0]="INITIALIZING";e[e.PENDING_REMOTE_INIT=1]="PENDING_REMOTE_INIT";e[e.PENDING_FINISH=2]="PENDING_FINISH";e[e.FINISH=3]="FINISH"}(a||(a={}));!function(e){e[e.QR_CODE=0]="QR_CODE";e[e.CONFIRM=1]="CONFIRM"}(o||(o={}));var A=n(1121),M=new d.default("LoginQRSocket");function P(e){var t=e.text,n=void 0===t?"":t,r=A,a=i.useState(!1),o=a[0],u=a[1];i.useEffect((function(){var e=new Image;e.src=r;e.onload=function(){return u(!0)};e.onerror=function(){return u(!0)}}),[r]);return R("div",{className:O.default.qrCodeContainer},void 0,""!==n&&o?i.createElement(i.Fragment,null,R(s.default,{className:O.default.qrCode,width:160,height:160,text:n}),R("div",{className:O.default.qrCodeOverlay},void 0,R("img",{src:r,alt:""}))):R("div",{className:O.default.qrCodeOverlay},void 0,R(m.default,{className:O.default.qrCode,type:m.default.Type.WANDERING_CUBES})))}
P.displayName="QrCodeWithOverlay";function w(e){var t=e.state,n=e.cancel;switch(t.step){case a.INITIALIZING:case a.PENDING_REMOTE_INIT:return i.createElement(i.Fragment,null,R(P,{text:t.step===a.PENDING_REMOTE_INIT?"https://discord.com/ra/"+t.fingerprint:""}),R(h.Title,{className:S.default.marginBottom8},void 0,N.default.Messages.LOGIN_WITH_QR),R(h.SubTitle,{},void 0,N.default.Messages.LOGIN_WITH_QR_DESCRIPTION.format()));case a.PENDING_FINISH:var r=t.user;return i.createElement(i.Fragment,null,R(f.default,{className:O.default.qrAvatar,user:r,size:g.default.Sizes.SIZE_120,isMobile:!0,status:l.StatusTypes.ONLINE}),R(h.Title,{className:S.default.marginBottom8},void 0,N.default.Messages.CONFIRM_QR_CHECK_YOUR_PHONE),R(h.SubTitle,{},void 0,N.default.Messages.LOGIN_AS.format({username:r.username+"#"+r.discriminator})),R(v.default,{look:v.default.Looks.BLANK,color:v.default.Colors.LINK,size:v.default.Sizes.MIN,onClick:n,className:O.default.startOverButton
},void 0,N.default.Messages.QR_CODE_LOGIN_START_OVER));case a.FINISH:return R(m.default,{type:m.default.Type.WANDERING_CUBES})}}},6034:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=(0,r.useState)(a()),t=e[0],n=e[1];(0,r.useEffect)((function(){function e(){n(a())}window.addEventListener("visibilitychange",e);return function(){window.removeEventListener("visibilitychange",e)}}),[n]);return t};var r=n(0);function a(){return"undefined"==typeof document||"visible"===document.visibilityState}},6035:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.generateRsaKeyPair=function(){return window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["decrypt"])};t.serializePublicKey=function(e){return u.apply(this,arguments)};t.publicKeyFingerprint=function(e){return l.apply(this,arguments)};t.sha256Digest=s;t.decryptEncodedCiphertext=p
;t.computeNonceProof=function(e,t){return m.apply(this,arguments)};t.decodeEncodedUserRecord=function(e,t){return h.apply(this,arguments)};var r,a=(r=n(89))&&r.__esModule?r:{default:r};function o(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function u(e){o(i,r,a,u,l,"next",e)}function l(e){o(i,r,a,u,l,"throw",e)}u(void 0)}))}}function u(){return(u=i(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return window.crypto.subtle.exportKey("spki",t.publicKey);case 2:n=e.sent;return e.abrupt("return",btoa(String.fromCharCode.apply(String,new Uint8Array(n))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=i(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){
for(;;)switch(e.prev=e.next){case 0:e.next=2;return window.crypto.subtle.exportKey("spki",t.publicKey);case 2:n=e.sent;return e.abrupt("return",s(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return f.apply(this,arguments)}function f(){return(f=i(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return window.crypto.subtle.digest("SHA-256",t);case 2:n=e.sent;return e.abrupt("return",btoa(String.fromCharCode.apply(String,new Uint8Array(n))).replace(/\//g,"_").replace(/\+/g,"-").replace(/={1,2}$/,""));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}function d(e,t){return window.crypto.subtle.decrypt({name:"RSA-OAEP"},e.privateKey,t)}function p(e,t){return v.apply(this,arguments)}function v(){return(v=i(regeneratorRuntime.mark((function e(t,n){var r,a
;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new TextDecoder;e.next=3;return d(t,c(n));case 3:a=e.sent;return e.abrupt("return",r.decode(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=i(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return d(t,c(n));case 2:r=e.sent;return e.abrupt("return",s(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=i(regeneratorRuntime.mark((function e(t,n){var r,o,i,u,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return p(t,n);case 2:n=e.sent;r=/^(\d+):(\d{4}):([a-zA-Z0-9_]+):(.*)$/;if(null!=(o=n.match(r))){e.next=7;break}throw new Error("Invalid encoded user record.");case 7:i=o[1],u=o[2],l=o[3],s=o[4];return e.abrupt("return",new a.default({id:i,discriminator:u,avatar:"0"===l?null:l,username:s}))
;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},8647:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NUF_NOTIFICATION_MODAL_KEY=t.NewUserTypes=void 0;var r;t.NewUserTypes=r;!function(e){e[e.MARKETING_UNCLAIMED=0]="MARKETING_UNCLAIMED";e[e.INVITE_UNCLAIMED=1]="INVITE_UNCLAIMED";e[e.ORGANIC_REGISTERED=2]="ORGANIC_REGISTERED";e[e.ORGANIC_REGISTERED_GUILD_TEMPLATE=3]="ORGANIC_REGISTERED_GUILD_TEMPLATE"}(r||(t.NewUserTypes=r={}));t.NUF_NOTIFICATION_MODAL_KEY="nuf-notification-modal-key"},8737:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.setNewUser=function(e){a.default.wait((function(){return a.default.dispatch({type:o.ActionTypes.NUF_NEW_USER,newUserType:e})}))};t.setNewUserFlowCompleted=function(){a.default.wait((function(){return a.default.dispatch({type:o.ActionTypes.NUF_COMPLETE})}))};var r,a=(r=n(2))&&r.__esModule?r:{default:r},o=n(1)},8782:function(e,t,n){"use strict";(function(e){
Object.defineProperty(t,"__esModule",{value:!0});t.default=ae;var r,a=Y(n(0)),o=W(n(10)),i=n(417),u=n(97),l=Y(n(3)),s=n(60),f=W(n(388)),c=W(n(9304)),d=W(n(10152)),p=W(n(1242)),v=W(n(441)),m=n(1243),h=n(10153),g=Y(n(10154)),_=W(n(9128)),E=n(9305),y=W(n(10155)),N=Y(n(8645)),O=W(n(1101)),S=W(n(5954)),I=n(8737),T=n(8647),R=W(n(5967)),C=n(5658),b=W(n(13)),A=W(n(1195)),M=W(n(5938)),P=W(n(142)),w=Y(n(508)),L=W(n(164)),D=W(n(15)),k=n(124),G=W(n(5983)),B=W(n(5968)),F=Y(n(5956)),U=W(n(5969)),j=n(1),x=W(n(7)),H=W(n(7873)),V=W(n(496));function W(e){return e&&e.__esModule?e:{default:e}}function K(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;K=function(){return e};return e}function Y(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=K();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){
var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;t&&t.set(e,n);return n}function z(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function $(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0
;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}l.default.initialize();var J=/\.$/,X=function(e){return Array.isArray(e)?e.map((function(e){return e.replace(J,"")})).join(". ").trim():e},ee=z(F.InviteResolvingHeader,{}),te=z(y.default,{}),ne=z(d.default,{fromRegister:!0}),re=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;Q(e,t)}(t,e);function t(t){var n;(n=e.call(this,t)||this).dateOfBirthRef=a.createRef();n._retryTimer=new s.Timeout;n.handleCaptchaVerify=function(e){return n.setState({captchaKey:e},(function(){n.handleRegister()}))};n.handleGotoLogin=function(){var e=n.state.email,t=n.props,r=t.onLoginStart,a=t.giftCode,o=t.transitionTo,u=t.invite,l=t.guildTemplate,s=t.redirectTo,c=t.isGuest,d=t.location,p=t.closeRegister,v=t.openLogin;if(c){void 0!==p&&p();void 0!==v&&v()}else{var m,h=null!=d?(0,i.parse)(d.search):{}
;if(null!=u)m=j.Routes.INVITE_LOGIN(u.code);else if(null!=a)m=j.Routes.GIFT_CODE_LOGIN(a.code);else if(null!=l)m=j.Routes.GUILD_TEMPLATE_LOGIN(l.code);else if(null!=s){m=j.Routes.LOGIN;h.redirect_to=s}else{m=j.Routes.LOGIN;""!==e&&(h={email:e})}f.default.loginReset();o(m,{search:(0,i.stringify)(h)});null!=r&&r();k.ComponentDispatch.dispatch(j.ComponentActions.WAVE_EMPHASIZE)}};n.handleSubmit=function(e){e&&e.preventDefault();var t=n.state.parsedDateOfBirth,r=n.props,a=r.invite;null!==r.consentRequired&&(null==a&&null==t||n.handleRegister())};n.handleBirthdayChange=function(e){n.setState({parsedDateOfBirth:e})};var r=null!=t.location?(0,i.parse)(t.location.search):{};n.state={email:r.email||"",username:"",password:"",parsedDateOfBirth:null,captchaKey:null,consent:!t.consentRequired,consentRequiredProp:t.consentRequired,isRateLimited:!1};return n}var n=t.prototype;n.hasConsent=function(){var e=this.props.consentRequired,t=this.state.consent;return null!=e&&t}
;n.componentDidMount=function(){this.redirectIfAuthenticated();var e=this.props,t=e.giftCodeSKU,n=e.invite;D.default.track(j.AnalyticEvents.REGISTER_VIEWED,Z({location:null!=n?"Invite Register Page":"Non-Invite Register Page",registration_source:this.registrationSource},null!=t?(0,O.default)(t,!1,!1):{}),{flush:!0});null==this.props.consentRequired&&f.default.getLocationMetadata();(0,C.trackAppUIViewed)("register")};n.componentWillUnmount=function(){this._retryTimer.stop()};t.getDerivedStateFromProps=function(e,t){var n=e.consentRequired;return null==t.consentRequiredProp&&null!=n?{consent:!n,consentRequiredProp:n}:{consentRequiredProp:n}};n.componentDidUpdate=function(e,t){var n=this,r=this.props,a=r.apiErrors,o=r.authenticated,i=r.isUnderage,u=r.invite,l=r.onChangeStep,s=this.state.parsedDateOfBirth
;if(e.apiErrors!==a||t.parsedDateOfBirth!==s)if(this.hasError("email")||this.hasError("phone"))null!=this.emailRef&&this.emailRef.focus();else if(this.hasError("username"))null!=this.usernameRef&&this.usernameRef.focus();else if(this.hasError("password"))null!=this.passwordRef&&this.passwordRef.focus();else if(null==this.state.parsedDateOfBirth)null!=this.dateOfBirthRef.current&&this.dateOfBirthRef.current.focus();else if(this.hasError("retry_after")){this.setState({isRateLimited:!0});this._retryTimer.start(1e3*this.props.apiErrors.retry_after,(function(){n.setState({isRateLimited:!1})}))}o&&!e.authenticated&&this.redirectIfAuthenticated();var f=h.RegistrationSteps.FULL;i||this.hasError("date_of_birth")?f=h.RegistrationSteps.AGE_GATE:this.hasError("captcha_key")?f=h.RegistrationSteps.CAPTCHA:null==u||null==u.guild&&null==u.channel||(f=h.RegistrationSteps.INVITE);l(f)};n.redirectIfAuthenticated=function(){var e=this.props,t=e.authenticated,n=e.transitionTo,r=e.redirectTo;if(t){(0,
I.setNewUser)(T.NewUserTypes.ORGANIC_REGISTERED);n(null!=r?r:M.default.defaultRoute)}};n.handleRegister=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,u,l,s,f,c,d,p,v,h,_,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state,n=t.email,r=t.username,a=t.password,o=t.captchaKey,i=t.consent,u=t.parsedDateOfBirth;l=this.props,s=l.invite,f=l.guildTemplate,c=l.giftCode,d=l.onRegister;p=null!=s?s.code:null;v=null!=c?c.skuId:null;h=m.usePromoEmailConsentStore.getState(),_=h.checked,E=h.enabled;k.ComponentDispatch.dispatch(j.ComponentActions.WAVE_EMPHASIZE);e.prev=6;if(null==s){e.next=12;break}e.next=10;return(0,g.default)({username:r,consent:i,invite:p,giftCodeSKUId:v,captchaKey:o});case 10:e.next=14;break;case 12:e.next=14;return(0,g.registerFull)({email:n,username:r,consent:i,password:a,invite:p,guildTemplateCode:null==f?void 0:f.code,giftCodeSKUId:v,captchaKey:o,birthday:u,promotionalEmailOptIn:E?_:null});case 14:e.next=18
;break;case 16:e.prev=16;e.t0=e.catch(6);case 18:d&&d();case 19:case"end":return e.stop()}}),e,this,[[6,16]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){$(o,r,a,i,u,"next",e)}function u(e){$(o,r,a,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();n.hasError=function(e){return null!=this.props.apiErrors[e]};n.renderConsentComponents=function(){var e=this,t=this.state.consent,n=null,r=null;this.props.consentRequired?r=z(_.default,{value:t,onChange:function(t){return e.setState({consent:t})},subText:x.default.Messages.TERMS_PRIVACY_OPT_IN.format({termsURL:j.MarketingURLs.TERMS,privacyURL:j.MarketingURLs.PRIVACY})}):n=z(w.SubText,{className:V.default.marginTop20},void 0,x.default.Messages.TERMS_PRIVACY.format({termsURL:j.MarketingURLs.TERMS,privacyURL:j.MarketingURLs.PRIVACY}));return{subText:n,consentText:r}};n.renderInviteResolving=function(){var e=this,t=this.props.authBoxClassName
;return z(w.default,{className:t},void 0,ee,z(w.Block,{className:V.default.marginTop40},void 0,z(L.default,{},void 0,x.default.Messages.FORM_LABEL_USERNAME),z(P.default,{text:x.default.Messages.AUTH_USERNAME_TOOLTIP,position:P.default.Positions.RIGHT,color:P.default.Colors.BRAND},void 0,(function(t){var n=t.onMouseEnter,r=t.onMouseLeave;return z(w.Input,{autoFocus:!0,className:V.default.marginBottom8,name:"username",value:e.state.username,placeholder:x.default.Messages.FORM_PLACEHOLDER_USERNAME,onChange:function(t){return e.setState({username:t})},onMouseEnter:n,onMouseLeave:r})})),z(w.Button,{className:V.default.marginTop20,disabled:!0},void 0,x.default.Messages.CONTINUE),z(w.Button,{look:w.Button.Looks.LINK,color:w.Button.Colors.LINK,disabled:!0,className:V.default.marginTop8},void 0,x.default.Messages.ALREADY_HAVE_ACCOUNT),z(w.SubText,{disabled:!0,className:V.default.marginTop20},void 0,x.default.Messages.TERMS_PRIVACY.format({termsURL:j.MarketingURLs.TERMS,
privacyURL:j.MarketingURLs.PRIVACY}))))};n.renderInviteHeader=function(){var e=this.props.invite;return null!=(null==e?void 0:e.stage_instance)&&null!=e.guild?z(N.default,{stageInstance:e.stage_instance,guild:e.guild}):null!=(null==e?void 0:e.guild_scheduled_event)?z(E.GuildScheduledEventInviteHeader,{guildScheduledEvent:e.guild_scheduled_event}):z(F.default,{invite:e})};n.renderInviteButton=function(){var e=this,t=this.props,n=t.invite,r=t.registering,o=t.consentRequired,i=this.state.consent,u=w.Button.Colors.BRAND,l=x.default.Messages.CONTINUE;if(null!=(null==n?void 0:n.stage_instance)){u=w.Button.Colors.GREEN;l=x.default.Messages.INSTANT_INVITE_ACCEPT_STAGE}return z(P.default,{text:!i&&o?x.default.Messages.TERMS_PRIVACY_OPT_IN_TOOLTIP:null},void 0,(function(t){return a.createElement("div",Z({className:V.default.marginTop20},t),z(w.Button,{type:"submit",submitting:r,disabled:!e.hasConsent(),color:u},void 0,l))}))};n.renderInvite=function(){
var e=this,t=this.props,n=t.invite,r=t.authBoxClassName,a=t.apiErrors.username,o=this.renderConsentComponents(),i=o.subText,u=o.consentText,l=null!=(null==n?void 0:n.stage_instance)||null!=(null==n?void 0:n.guild_scheduled_event);return z("div",{},void 0,z(w.default,{onSubmit:this.handleSubmit,tag:"form",className:r},void 0,this.renderInviteHeader(),l?z("div",{className:H.default.divider}):null,z(w.Block,{className:l?void 0:V.default.marginTop40},void 0,z(L.default,{error:X(a)},void 0,x.default.Messages.FORM_LABEL_USERNAME),z(P.default,{text:x.default.Messages.AUTH_USERNAME_TOOLTIP,position:P.default.Positions.RIGHT,color:P.default.Colors.BRAND},void 0,(function(t){var n=t.onMouseEnter,r=t.onMouseLeave;return z(w.Input,{autoFocus:!0,className:V.default.marginBottom8,name:"username",value:e.state.username,placeholder:x.default.Messages.FORM_PLACEHOLDER_USERNAME,onChange:function(t){return e.setState({username:t})},error:null!=a?"":null,onMouseEnter:n,onMouseLeave:r})
})),u,this.renderInviteButton(),z(w.Button,{look:w.Button.Looks.LINK,color:w.Button.Colors.LINK,onClick:this.handleGotoLogin,className:V.default.marginTop8},void 0,x.default.Messages.ALREADY_HAVE_ACCOUNT),i)),null!=n&&l?z(w.default,{className:V.default.marginTop20},void 0,z(N.StageInviteFooter,{guild:n.guild,onlineCount:n.approximate_presence_count})):null)};n.renderErrorMessage=function(){var e=this.props.apiErrors.message;return null!=e?z(w.SubText,{className:(0,o.default)(V.default.marginTop20,H.default.errorMessage)},void 0,e):null};n.renderFull=function(e,t){var n=this,r=this.state,i=r.email,u=r.username,l=r.password,s=r.consent,f=r.parsedDateOfBirth,c=this.props,d=c.registering,v=c.consentRequired,m=c.isGuest,h=c.authBoxClassName,g=c.apiErrors,_=(g=void 0===g?{}:g).email,E=g.username,y=g.password,N=g.date_of_birth,O=this.renderConsentComponents(),S=O.subText,I=O.consentText,T=this.renderErrorMessage(),R=z(P.default,{text:!s&&v?x.default.Messages.TERMS_PRIVACY_OPT_IN_TOOLTIP:null
},void 0,(function(e){return a.createElement("div",Z({className:V.default.marginTop20},e),z(w.Button,{type:"submit",submitting:d,disabled:!n.hasConsent()||n.state.isRateLimited},void 0,x.default.Messages.CONTINUE))})),C=m?null:null!=e?e():z(w.Title,{},void 0,x.default.Messages.REGISTER_TITLE),b=z(w.Block,{className:V.default.marginTop20},void 0,z(w.Input,{autoFocus:!0,label:x.default.Messages.FORM_LABEL_EMAIL,className:V.default.marginBottom20,name:"email",value:i,onChange:function(e){return n.setState({email:e})},error:X(_),type:"email",setRef:function(e){n.emailRef=e}}),z(w.Input,{label:x.default.Messages.FORM_LABEL_USERNAME,className:V.default.marginBottom20,name:"username",value:u,onChange:function(e){return n.setState({username:e})},error:X(E),setRef:function(e){n.usernameRef=e}}),z(w.Input,{label:x.default.Messages.FORM_LABEL_PASSWORD,name:"password",value:l,onChange:function(e){return n.setState({password:e})},error:X(y),type:"password",setRef:function(e){n.passwordRef=e}
}),a.createElement(p.default,{label:x.default.Messages.AGE_GATE_YOUR_BIRTHDAY,wrapperClassName:V.default.marginTop20,name:"date_of_birth",onChange:this.handleBirthdayChange,ref:this.dateOfBirthRef,error:X(N),value:f}),te,I,R,T,z(w.Button,{look:w.Button.Looks.LINK,color:w.Button.Colors.LINK,onClick:this.handleGotoLogin,className:V.default.marginTop8},void 0,x.default.Messages.ALREADY_HAVE_ACCOUNT),S);return t?z(U.default,{onSubmit:this.handleSubmit,tag:"form",className:(0,o.default)(h,H.default.horizontalAuthBox)},void 0,(function(){return[C,z("div",{className:H.default.flex},void 0,z(w.Title,{className:H.default.createAccountTemplateHeader},void 0,x.default.Messages.REGISTER_TITLE),b)]})):z(w.default,{onSubmit:this.handleSubmit,tag:"form",className:h},void 0,C,b)};n.render=function(){var e=this.props,t=e.isGuest,n=e.authBoxClassName,r=e.isUnderage,a=e.apiErrors,o=a.captcha_service,i=a.captcha_sitekey;if(r||this.hasError("date_of_birth"))return ne
;if(this.hasError("captcha_key"))return z(G.default,{authBoxClassName:n,onVerify:this.handleCaptchaVerify,title:t?null:x.default.Messages.REGISTER_TITLE,captchaService:o,sitekey:i});var u=this.props,l=u.invite,s=u.giftCode,f=u.guildTemplate,c=null!=l&&null==l.guild&&null==l.channel&&null!=l.inviter;if(null!=l&&!c)return l.state===j.InviteStates.RESOLVING?this.renderInviteResolving():this.renderInvite();var d=z(S.default,{guildTemplate:f});if(null!=f)return this.renderFull((function(){return d}),!0);var p=z(B.default,{giftCode:s});if(null!=s)return this.renderFull((function(){return p}));var v=z(F.default,{invite:l,isRegister:!0});return null!=l&&c&&l.state===j.InviteStates.RESOLVED?this.renderFull((function(){return v})):this.renderFull()};!function(e,t,n){t&&q(e.prototype,t);n&&q(e,n)}(t,[{key:"registrationSource",get:function(){var e=this.props,t=e.giftCode,n=e.guildTemplate,r=e.invite;if(null!=t)return"gift";if(null!=n)return"guild_template";if(null!=r){
if(null!=r.guild)return"guild_invite";if(null!=r.channel)return"dm_invite";if(null!=r.inviter)return"friend_invite"}return null}}]);return t}(a.PureComponent);re.displayName="Register";re.defaultProps={giftCodeResolved:!1,transitionTo:function(t){return e.location.assign(t)}};function ae(e){var t={consentRequired:(0,l.useStateFromStores)([A.default],(function(){return A.default.getAuthenticationConsentRequired()})),registering:(0,l.useStateFromStores)([b.default],(function(){return b.default.getRegisterStatus()===j.RegistrationStates.REGISTERING})),apiErrors:(0,l.useStateFromStores)([b.default],(function(){return b.default.getErrors()})),authenticated:(0,l.useStateFromStores)([b.default],(function(){return b.default.isAuthenticated()})),isUnderage:(0,l.useStateFromStores)([c.default],(function(){return c.default.isUnderageAnonymous()})),country:(0,l.useStateFromStores)([R.default],(function(){return R.default.getCountryCode()}))},n=a.useState(h.RegistrationSteps.FULL),r=n[0],o=n[1];(0,
v.default)({type:u.ImpressionTypes.VIEW,name:u.ImpressionNames.USER_REGISTRATION,metadata:{impression_group:u.ImpressionGroups.USER_REGISTRATION_FLOW,step:r}},{},[r]);return a.createElement(re,Z({onChangeStep:function(e){return o(e)}},e,t))}ae.displayName="ConnectedRegister"}).call(this,n(42))},8851:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=c;!function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;t&&t.set(e,n)}(n(0));var r,a=l(n(10)),o=l(n(7740)),i=l(n(9869)),u=l(n(9870));function l(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap
;s=function(){return e};return e}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(e){var t=e.Icon,n=e.className;return f("div",{className:(0,a.default)(o.default.container,n)},void 0,f("div",{className:o.default.innerContainer},void 0,f("img",{src:u.default,alt:"",className:o.default.star}),f("div",{className:o.default.iconWrapper},void 0,f(t,{width:40,height:40})),f("img",{src:i.default,alt:"",className:o.default.sparkle})))}c.displayName="SparklyIcon"},8853:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=f;var r,a,o=function(e){if(e&&e.__esModule)return e
;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;t&&t.set(e,n);return n}(n(0)),i=(r=n(24))&&r.__esModule?r:{default:r};function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;u=function(){return e};return e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=r;else if(i>1){
for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function f(e){var t=e.width,n=void 0===t?24:t,r=e.height,a=void 0===r?24:r,u=e.color,f=void 0===u?"currentColor":u,c=e.foreground,d=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(a[n]=e[n])}return a}(e,["width","height","color","foreground"]);return o.createElement("svg",l({},(0,i.default)(d),{width:n,height:a,viewBox:"0 0 24 24"}),s("path",{className:c,fill:f,d:"M23 10V4H1V10C2.1 10 3 10.9 3 12C3 13.1 2.1 14 1 14V20H23V14C21.9 14 21 13.1 21 12C21 10.9 21.9 10 23 10ZM13 16V18H11V16H9V14H13C13.27 14 13.5 13.83 13.5 13.62C13.5 12.58 8.5 13.62 8.5 10.37C8.5 9.07 9.62 8 11 8V6H13V8H15V10H11C10.73 10 10.5 10.17 10.5 10.38C10.5 11.42 15.5 10.38 15.5 13.63C15.5 14.93 14.38 16 13 16Z"}))}f.displayName="Ticket"},
9054:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GuildEventStatus=E;t.GuildEventDetails=y;t.default=N;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;t&&t.set(e,n);return n}(n(0)),o=m(n(10)),i=m(n(8529)),u=m(n(1164)),l=m(n(8455)),s=m(n(50)),f=m(n(25)),c=n(1222),d=m(n(9814)),p=m(n(7)),v=m(n(7710));function m(e){return e&&e.__esModule?e:{default:e}}function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;h=function(){return e};return e}function g(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3
;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function _(e){var t=e.startTime,n=e.isLive,r=u.default,a=v.default.eventStatusBrand,o=f.default.Colors.HEADER_SECONDARY,i=(0,c.getEventTimeData)(t),s=i.startDateTimeString,d=i.currentOrPastEvent,m=i.upcomingEvent,h=i.diffMinutes,_=s;if(n){_=p.default.Messages.STAGE_CHANNEL_LIVE_NOW;a=v.default.eventStatusGreen;o=f.default.Colors.STATUS_GREEN}else if(d){_=p.default.Messages.STARTING_SOON;r=l.default;a=v.default.eventStatusBrand;o=f.default.Colors.BRAND}else if(m){_=h>0?p.default.Messages.STARTING_IN_MINUTES.format({minutes:h}):p.default.Messages.STARTING_SOON;o=f.default.Colors.BRAND}return g("div",{className:v.default.eventStatusContainer},void 0,g(r,{className:a,width:20,height:20}),g(f.default,{color:o,
className:v.default.eventStatusLabel},void 0,_))}_.displayName="GuildEventTimeStatus";function E(e){var t=e.className,n=e.userCount,r=e.startTime,a=e.isLive;return g("div",{className:(0,o.default)(v.default.statusContainer,t)},void 0,g(_,{startTime:r,isLive:a}),null!=n&&g("div",{className:v.default.rsvpCount},void 0,g(i.default,{width:12,height:12,className:v.default.rsvpIcon}),g(f.default,{color:f.default.Colors.HEADER_SECONDARY},void 0,n)))}E.displayName="GuildEventStatus";function y(e){var t=e.name,n=e.description;return a.createElement(a.Fragment,null,g(s.default,{size:s.default.Sizes.SIZE_20},void 0,t),null!=n&&g(d.default,{description:n}))}function N(e){var t=e.userCount,n=e.name,r=e.description,a=e.startTime,o=e.isLive;return g("div",{className:v.default.container},void 0,g(E,{className:v.default.eventInfoStatusContainer,userCount:t,startTime:a,isLive:o}),g(y,{name:n,description:r}))}N.displayName="GuildEventInfo"},9128:function(e,t,n){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0});t.default=d;!function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;t&&t.set(e,n)}(n(0));var r,a=s(n(1084)),o=s(n(58)),i=n(508),u=s(n(7871)),l=s(n(496));function s(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;f=function(){return e};return e}function c(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}
if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function d(e){var t=e.value,n=e.onChange,r=e.subText;return c(o.default,{className:l.default.marginTop20,align:o.default.Align.CENTER},void 0,c(a.default,{value:t,type:a.default.Types.INVERTED,onChange:function(e,t){return n(t)},className:u.default.checkbox},void 0,c(i.SubText,{},void 0,r)))}d.displayName="ConsentCheckBox"},9176:function(e,t,n){e.exports=n.p+"4b25b64915cb0e74934b6b749445def2.svg"},9304:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r=l(n(1077)),a=l(n(3)),o=l(n(2)),i=l(n(17)),u=n(780);n(1);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}var f=null;var c=new(function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;s(e,t)}(t,e);function t(){
return e.apply(this,arguments)||this}t.prototype.isUnderageAnonymous=function(){if(!i.default.embedded){return null!=r.default.parse(document.cookie).underage}return null!=f&&f+u.AGE_GATE_REGISTER_TIMEOUT_MS>Date.now()};return t}(a.default.Store))(o.default,{AGE_GATE_PREVENT_UNDERAGE_REGISTRATION:function(e){return function(){!0;f=Date.now();document.cookie="underage=1;path=/"}()},LOGIN_SUCCESS:function(e){return function(){!1;f=null;document.cookie="underage=1;path=/;max-age=0"}()}});t.default=c},9305:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GuildScheduledEventInviteHeader=s;!function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null
;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;t&&t.set(e,n)}(n(0));var r,a,o=n(9054),i=(r=n(7872))&&r.__esModule?r:{default:r};function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;u=function(){return e};return e}function l(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;t||0===i||(t={children:void 0});if(1===i)t.children=r;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function s(e){var t,n=e.guildScheduledEvent;return l("div",{className:i.default.container},void 0,l(o.GuildEventStatus,{className:i.default.statusContainer,userCount:n.user_count,startTime:n.scheduled_start_time,isLive:!1}),l(o.GuildEventDetails,{name:n.name,
description:null!==(t=n.description)&&void 0!==t?t:void 0}))}s.displayName="GuildScheduledEventInviteHeader"},9814:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=d;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;t&&t.set(e,n);return n}(n(0)),o=s(n(10)),i=n(9815),u=s(n(25)),l=s(n(7385));function s(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;f=function(){return e};return e}function c(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3
;t||0===i||(t={children:void 0});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function d(e){var t=e.description,n=e.className,r=a.useMemo((function(){return(0,i.parseGuildEventDescriptionReact)(t)}),[t]);return c(u.default,{color:u.default.Colors.HEADER_SECONDARY,className:(0,o.default)(n,l.default.markup)},void 0,r)}d.displayName="GuildEventDescription"},9815:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.parseGuildEventDescriptionReact=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){
var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;t&&t.set(e,n);return n}(n(753)),a=i(n(8667)),o=i(n(1190));function i(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;u=function(){return e};return e}var l=(0,i(n(1191)).default)([o.default.GUILD_EVENT_RULES,(0,a.default)({enableBuildOverrides:!1})]),s=r.reactParserFor(l);t.parseGuildEventDescriptionReact=s},9869:function(e,t,n){e.exports=n.p+"605ae14dee1349dcc4e873f5fbf09a8d.svg"},9870:function(e,t,n){e.exports=n.p+"03fb3f616aa0e2d40dfed558d3224cd7.svg"}}]);
//# sourceMappingURL=f22f349711bb39d77a57.js.map